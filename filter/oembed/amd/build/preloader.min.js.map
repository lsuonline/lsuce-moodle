{"version":3,"sources":["../src/preloader.js"],"names":["define","$","apply","on","card","parent","data","cardwidth","width","cardheight","height","find","length","iframe","src","attr","paramglue","indexOf","replaceWith"],"mappings":"AAwBAA,OAAM,2BAAC,CAAC,QAAD,CAAD,CACF,SAASC,CAAT,CAAY,CACR,MAAO,CACHC,KAAK,CAAE,gBAAW,CACdD,CAAC,CAAC,mBAAD,CAAD,CAAuBE,EAAvB,CAA0B,OAA1B,CAAmC,UAAW,IACtCC,CAAAA,CAAI,CAAGH,CAAC,CAAC,IAAD,CAAD,CAAQI,MAAR,CAAe,cAAf,CAD+B,CAEtCC,CAAI,CAAGL,CAAC,CAACG,CAAI,CAACE,IAAL,CAAU,OAAV,CAAD,CAF8B,CAGtCC,CAAS,CAAGN,CAAC,CAACG,CAAD,CAAD,CAAQI,KAAR,EAH0B,CAItCC,CAAU,CAAGR,CAAC,CAACG,CAAD,CAAD,CAAQM,MAAR,EAJyB,CAS1C,GAAIT,CAAC,CAACK,CAAD,CAAD,CAAQK,IAAR,CAAa,QAAb,EAAuBC,MAA3B,CAAmC,IAC3BC,CAAAA,CAAM,CAAGZ,CAAC,CAACA,CAAC,CAACK,CAAD,CAAD,CAAQK,IAAR,CAAa,QAAb,EAAuB,CAAvB,CAAD,CADiB,CAE3BG,CAAG,CAAGD,CAAM,CAACE,IAAP,CAAY,KAAZ,CAFqB,CAG3BC,CAAS,CAAsB,CAAC,CAApB,CAAAF,CAAG,CAACG,OAAJ,CAAY,GAAZ,EAAwB,GAAxB,CAA8B,GAHf,CAI/BH,CAAG,EAAIE,CAAS,CAAG,YAAnB,CACAF,CAAG,gBAAH,CACAD,CAAM,CAACE,IAAP,CAAY,KAAZ,CAAmBD,CAAnB,CACH,CAGDR,CAAI,CAACS,IAAL,CAAU,iBAAV,CAA6BR,CAA7B,EACAD,CAAI,CAACS,IAAL,CAAU,kBAAV,CAA8BN,CAA9B,EACAL,CAAI,CAACC,MAAL,CAAY,wBAAZ,EAAsCa,WAAtC,CAAkDZ,CAAlD,CACH,CAtBD,CAuBH,CAzBE,CA2BV,CA7BC,CAAN","sourcesContent":["/**\n * This file is part of Moodle - http://moodle.org/\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @package   filter_oembed\n * @copyright Guy Thomas / moodlerooms.com 2016\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Oembed preloader.\n */\ndefine(['jquery'],\n    function($) {\n        return {\n            apply: function() {\n                $(\".oembed-card-play\").on(\"click\", function() {\n                    var card = $(this).parent('.oembed-card');\n                    var data = $(card.data('embed'));\n                    var cardwidth = $(card).width();\n                    var cardheight = $(card).height();\n\n                    // Add auto play params.\n                    // Because we are using a preloader we ideally want the content to play after clicking the preloader\n                    // play button.\n                    if ($(data).find('iframe').length) {\n                        var iframe = $($(data).find('iframe')[0]);\n                        var src = iframe.attr('src');\n                        var paramglue = src.indexOf('?') > -1 ? '&' : '?';\n                        src += paramglue + 'autoplay=1';\n                        src += '&' + 'auto_play=1';\n                        iframe.attr('src', src);\n                    }\n\n                    // Replace card with oembed html.\n                    data.attr('data-card-width', cardwidth);\n                    data.attr('data-card-height', cardheight);\n                    card.parent('.oembed-card-container').replaceWith(data);\n                });\n            }\n        };\n    }\n);\n"],"file":"preloader.min.js"}