define ("local_liquidus/segment-lazy",["jquery","core/log"],function(a,b){var c=this,d={},e={};c.addAnalyticsJS=function(){var f=a.Deferred(),g=d.trackerInfo.writeKey;if(!g){b.debug("Liquidus is misconfigured for Segment, Write Key is missing.");return}!function(){var b=window.analytics=window.analytics||[];if(!b.initialize)if(b.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{b.invoked=!0;b.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];b.factory=function(a){return function(){var c=Array.prototype.slice.call(arguments);c.unshift(a);b.push(c);return b}};for(var h=0,a;h<b.methods.length;h++){a=b.methods[h];b[a]=b.factory(a)}b.load=function(c,d){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src="https://cdn.segment.com/analytics.js/v1/"+c+"/analytics.min.js";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f);b._loadOptions=d};b.SNIPPET_VERSION="4.1.0";c.analytics=b;b.load(g);f.resolve(d)}}();return f};d.loadTracker=function(a){d.trackerInfo=a;return c.addAnalyticsJS()};d.identify=function(){b.debug("Identifying with segment");c.analytics.identify(d.trackerInfo.staticShares.userHash,d.trackerInfo.staticShares)};d.trackPage=function(){c.analytics.page()};d.processEvent=function(a,f,g){c.analytics.track(f,{userHash:d.trackerInfo.staticShares.userHash,eventData:g},e,function(){a.resolve(!0);b.debug("Segment resolved.")})};return d});
//# sourceMappingURL=segment-lazy.min.js.map
