{"version":3,"sources":["../src/main.js"],"names":["define","$","Log","Router","requireTracker","trackerInfo","trackerId","staticShares","localLiquidusShares","debug","require","tracker","loadTracker","done","registerTracker","Liquidus","init"],"mappings":"AAsBAA,OAAM,uBAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,uBAAvB,CAAD,CACN,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAyB,IAEfC,CAAAA,CAAc,CAAG,SAACC,CAAD,CAAiB,CACpC,GAAI,CAACA,CAAW,CAACC,SAAjB,CAA4B,CACxB,MACH,CAGDD,CAAW,CAACE,YAAZ,CAA2B,EAA3B,CAGA,GAAmC,WAA/B,QAAOC,CAAAA,mBAAP,EACyD,WAAtD,QAAOA,CAAAA,mBAAmB,CAACH,CAAW,CAACC,SAAb,CADjC,CAEE,CACEJ,CAAG,CAACO,KAAJ,YAAcJ,CAAW,CAACC,SAA1B,8BACAD,CAAW,CAACE,YAAZ,CAA2BC,mBAAmB,CAACH,CAAW,CAACC,SAAb,CACjD,CAEDI,OAAO,CAAC,CAAC,kBAAoBL,CAAW,CAACC,SAAhC,CAA4C,OAA7C,CAAD,CAAwD,SAASK,CAAT,CAAkB,CAC7ET,CAAG,CAACO,KAAJ,YAAcJ,CAAW,CAACC,SAA1B,qCACAJ,CAAG,CAACO,KAAJ,CAAUJ,CAAV,EACAM,CAAO,CAACC,WAAR,CAAoBP,CAApB,EACKQ,IADL,CACU,iBAAMV,CAAAA,CAAM,CAACW,eAAP,CAAuBH,CAAvB,CAAN,CADV,CAGH,CANM,CAOV,CAzBoB,CAgCfI,CAAQ,CAAG,SAASV,CAAT,CAAsB,CACnCH,CAAG,CAACO,KAAJ,YAAcJ,CAAW,CAACC,SAA1B,yBACAH,CAAM,CAACa,IAAP,GAAcH,IAAd,CAAmB,UAAM,CACrBT,CAAc,CAACC,CAAD,CACjB,CAFD,CAGH,CArCoB,CAuCrB,MAAO,CACH,KAAQ,cAACA,CAAD,CAAiB,CACrB,MAAO,IAAIU,CAAAA,CAAJ,CAAaV,CAAb,CACV,CAHE,CAKV,CA7CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Liquidus main module. Loads specific trackers.\n *\n * @package   local_liquidus\n * @copyright Copyright (c) 2020 Open LMS\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/log', 'local_liquidus/router'],\nfunction($, Log, Router) {\n\n    const requireTracker = (trackerInfo) => {\n        if (!trackerInfo.trackerId) {\n            return;\n        }\n\n        // Initialize tracker's static shares.\n        trackerInfo.staticShares = {};\n\n        /* global localLiquidusShares */\n        if (typeof localLiquidusShares !== 'undefined'\n            && typeof localLiquidusShares[trackerInfo.trackerId] !== 'undefined'\n        ) {\n            Log.debug(`[${trackerInfo.trackerId}] Found shares, loading.`);\n            trackerInfo.staticShares = localLiquidusShares[trackerInfo.trackerId];\n        }\n\n        require(['local_liquidus/' + trackerInfo.trackerId + '-lazy'], function(tracker) {\n            Log.debug(`[${trackerInfo.trackerId}] Loaded tracker. Initializing.`);\n            Log.debug(trackerInfo);\n            tracker.loadTracker(trackerInfo)\n                .done(() => Router.registerTracker(tracker))\n            ;\n        });\n    };\n\n    /**\n     * Create a single instance for Liquidus to configure a single tracker.\n     * @param trackerInfo\n     * @constructor\n     */\n    const Liquidus = function(trackerInfo) {\n        Log.debug(`[${trackerInfo.trackerId}] Loading Liquidus.`);\n        Router.init().done(() => {\n            requireTracker(trackerInfo);\n        });\n    };\n\n    return {\n        'init': (trackerInfo) => {\n            return new Liquidus(trackerInfo);\n        }\n    };\n});\n"],"file":"main.min.js"}