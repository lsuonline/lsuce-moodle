define ("local_liquidus/keenio-lazy",["jquery","core/log"],function(a,b){var c=this,d={};c.addKeenIO=function(){var e=a.Deferred(),f=d.trackerInfo.writeKey,g=d.trackerInfo.projectId;if(!f||!g){b.debug("Liquidus is misconfigured for keen.io, Write Key or Project ID are missing.");return}(function(a,b,c){var d,e="Keen"!==a&&window.Keen?window.Keen:!1;c[a]=c[a]||{ready:function ready(f){var g=document.getElementsByTagName("head")[0],h=document.createElement("script"),i=window,j;h.onload=h.onerror=h.onreadystatechange=function(){if(h.readyState&&!/^c|loade/.test(h.readyState)||j){return}h.onload=h.onreadystatechange=null;j=1;d=i.Keen;if(e){i.Keen=e}else{try{delete i.Keen}catch(a){i.Keen=void 0}}c[a]=d;c[a].ready(f)};h.async=1;h.src=b;g.parentNode.insertBefore(h,g)}}})("KeenAsync","https://d26b395fwzu5fz.cloudfront.net/keen-tracking-1.4.2.min.js",this);KeenAsync.ready(function(){c.client=new KeenAsync({projectId:g,writeKey:f});e.resolve(d)});return e};d.loadTracker=function(a){d.trackerInfo=a;return c.addKeenIO()};d.identify=function(){c.client.recordEvent("identify",{userHash:d.trackerInfo.staticShares.userHash})};d.trackPage=function(){c.client.recordEvent("pageviews",d.trackerInfo.staticShares)};d.processEvent=function(a,e,f){c.client.recordEvent(e,{userHash:d.trackerInfo.staticShares.userHash,eventData:f},function(){a.resolve(!0);b.debug("KeenIO resolved.")})};return d});
//# sourceMappingURL=keenio-lazy.min.js.map
