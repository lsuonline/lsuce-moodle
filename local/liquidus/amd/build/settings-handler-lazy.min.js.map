{"version":3,"sources":["../src/settings-handler-lazy.js"],"names":["moveSectionsToTabs","types","settingsNode","length","Templates","render","then","html","append","tabNode","contentNode","activeFirst","i","type","providerEnablingNode","headingNode","parent","prev","titleNode","settingRows","id","title","text","active","navHtml","remove","contentHtml","detach","appendTo","init"],"mappings":"iLAuBA,OACA,O,sDAMMA,CAAAA,CAAkB,CAAG,SAACC,CAAD,CAAW,CAClC,GAAMC,CAAAA,CAAY,CAAG,cAAE,2DAAF,CAArB,CACA,GAA4B,CAAxB,GAAAA,CAAY,CAACC,MAAjB,CAA+B,CAC3B,MACH,CACDC,UAAUC,MAAV,CAAiB,8BAAjB,CAAiD,EAAjD,EAAqDC,IAArD,CAA0D,SAACC,CAAD,CAAU,CAEhEL,CAAY,CAACM,MAAb,CAAoBD,CAApB,EAFgE,GAG1DE,CAAAA,CAAO,CAAG,cAAE,kCAAF,CAHgD,CAI1DC,CAAW,CAAG,cAAE,sCAAF,CAJ4C,CAK5DC,CAAW,GALiD,YAMrDC,CANqD,KAOtDC,CAAAA,CAAI,CAAGZ,CAAK,CAACW,CAAD,CAP0C,CAStDE,CAAoB,CAAG,6CAA0BD,CAA1B,EAT+B,CAWtDE,CAAW,CAAGD,CAAoB,CAACE,MAArB,GAA8BA,MAA9B,GAAuCA,MAAvC,GAAgDC,IAAhD,EAXwC,CAatDC,CAAS,CAAGH,CAAW,CAACE,IAAZ,EAb0C,CAetDE,CAAW,CAAG,sCAAmBN,CAAnB,EAfwC,CAiB5DT,UAAUC,MAAV,CAAiB,uCAAjB,CAA0D,CACtDe,EAAE,CAAEP,CADkD,CAEtDQ,KAAK,CAAEH,CAAS,CAACI,IAAV,EAF+C,CAGtDC,MAAM,CAAEZ,CAH8C,CAA1D,EAIGL,IAJH,CAIQ,SAACkB,CAAD,CAAa,CACjBf,CAAO,CAACD,MAAR,CAAegB,CAAf,EACAN,CAAS,CAACO,MAAV,EACH,CAPD,EAUArB,UAAUC,MAAV,CAAiB,0CAAjB,CAA6D,CACzDe,EAAE,CAAEP,CADqD,CAEzDU,MAAM,CAAEZ,CAFiD,CAA7D,EAGGL,IAHH,CAGQ,SAACoB,CAAD,CAAiB,CACrBhB,CAAW,CAACF,MAAZ,CAAmBkB,CAAnB,EACAX,CAAW,CAACY,MAAZ,GAAqBC,QAArB,+BAAqDf,CAArD,GACAM,CAAW,CAACQ,MAAZ,GAAqBC,QAArB,+BAAqDf,CAArD,EACH,CAPD,EASAF,CAAW,GApCiD,EAMhE,IAAK,GAAMC,CAAAA,CAAX,GAAgBX,CAAAA,CAAhB,CAAuB,GAAZW,CAAY,CA+BtB,CACJ,CAtCD,CAuCH,C,QAMmB,QAAPiB,CAAAA,IAAO,CAAC5B,CAAD,CAAW,CAC3B,CAAC,UAAW,CACRD,CAAkB,CAACC,CAAD,CACrB,CAFD,GAGH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Liquidus settings initializer.\n *\n * @module     local_liquidus/settings-handler-lazy\n * @copyright  Copyright (c) 2021 Open LMS (https://www.openlms.net)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport Templates from 'core/templates';\n\n/**\n * Moves setting sections to tabs.\n * @param types\n */\nconst moveSectionsToTabs = (types) => {\n    const settingsNode = $('#page-admin-setting-local_liquidus .settingsform fieldset');\n    if (settingsNode.length === 0) {\n        return;\n    }\n    Templates.render('local_liquidus/settings_tabs', {}).then((html) => {\n        // Create tab structure.\n        settingsNode.append(html);\n        const tabNode = $('#local_liquidus-settings-nav-tab');\n        const contentNode = $('#local_liquidus-settings-nav-content');\n        let activeFirst = true;\n        for (const i in types) {\n            const type = types[i];\n            // Base selector is the enabling checkbox.\n            const providerEnablingNode = $(`#id_s_local_liquidus_${type}`);\n            // Find formsetingheading.\n            const headingNode = providerEnablingNode.parent().parent().parent().prev();\n            // Find title h3.\n            const titleNode = headingNode.prev();\n            // Get all rows that correspond to setting inputs.\n            const settingRows = $(`div[id^=admin-${type}`);\n            // Move title to nav.\n            Templates.render('local_liquidus/settings_tabs_nav_link', {\n                id: type,\n                title: titleNode.text(),\n                active: activeFirst,\n            }).then((navHtml) => {\n                tabNode.append(navHtml);\n                titleNode.remove();\n            });\n\n            // Move content to div.\n            Templates.render('local_liquidus/settings_tabs_nav_content', {\n                id: type,\n                active: activeFirst,\n            }).then((contentHtml) => {\n                contentNode.append(contentHtml);\n                headingNode.detach().appendTo(`#local_liquidus-nav-${type}`);\n                settingRows.detach().appendTo(`#local_liquidus-nav-${type}`);\n            });\n\n            activeFirst = false;\n        }\n    });\n};\n\n/**\n * Initializer.\n * @param types\n */\nexport const init = (types) => {\n    (function() {\n        moveSectionsToTabs(types);\n    })();\n};"],"file":"settings-handler-lazy.min.js"}