{"version":3,"file":"renderer.min.js","names":["define","$","templates","HB","fetchAndLoad","processPage","data","getSnippet","changePage","showPage","page","each","temp_that","attr","show","text","localStorage","hide","render","then","html","js","appendNodeContents","fail","console","log","setSnippet"],"sources":["../src/renderer.js"],"sourcesContent":["\ndefine([\n    'jquery',\n    'core/templates',\n    'local_myadmin/heartbeat'\n], function($, templates, HB) {\n\n        'use strict';\n        return {\n\n            fetchAndLoad: function() {\n                // console.log(\"fetchAndLoad() -> START -------------\");\n\n                // ok, the main page has loaded and now we have other sub-pages that\n                // could be in localCache. If not then fetch and store.\n                /*\n                localStorage.stashy.foreach(function(chunk) {\n                    big_dump += chunk;\n                });\n                console.log(\"What is big_dump: \" + big_dump);\n                // now let's append all the cached pages.\n                $('#myadmin_page_switcher').append(big_dump);\n                */\n            },\n\n            /**\n             * Process the page that has been clicked\n             * @method fetchSWE\n             * @param {object} args The request arguments\n             * @return {promise} Resolved with an array of the calendar events\n             */\n            processPage: function(data) {\n                // in blocks/myoverview/amd/src/tab_preferences has an example of saving\n                // the pages state and preferences\n                // console.log(\"What is data: \" + data);\n                // data will be the page, page_dashboard, page_examlist\n                this.getSnippet(data);\n                HB.changePage(data);\n            },\n\n            showPage: function (page) {\n                // console.log(\"renderer -> showPage() -> what is the page: \" + page);\n                $('.myadmin_page_loader').each( function() {\n                    var temp_that = $(this);\n\n                    if (temp_that.attr('id') == page) {\n                        temp_that.show();\n                        // make sure the title of the page is updated.\n                        var page_title = page + \"_title\";\n                        $('.myadmin_db_title').text(localStorage[page_title]);\n                    } else {\n                        temp_that.hide();\n                    }\n                });\n            },\n\n            getSnippet: function(page) {\n                // let's check to see if this template is stored\n                var context = {},\n                that = this;\n\n                if (localStorage[page] === \"false\") {\n                    // This will call the function to load and render our template.\n                    templates.render('local_myadmin/' + page, context)\n\n                    // It returns a promise that needs to be resoved.\n                    .then(function(html, js) {\n                        // Here eventually I have my compiled template, and any javascript that it generated.\n                        // The templates object has append, prepend and replace functions.\n\n                        // templates.replaceNodeContents('#myadmin_page_switcher', html, js);\n                        templates.appendNodeContents('#myadmin_page_switcher', html, js);\n\n                        // Save the state of the store to true to avoid re-appending\n                        localStorage[page] = true;\n                        that.showPage(page);\n                    }).fail(function() {\n                        // Deal with this exception (I recommend core/notify exception function for this).\n                        console.log(\"myadmin/renderer.js -> getSnippet() - FAIL, the ajax failed to get template\");\n                    });\n\n                } else {\n                    this.showPage(page);\n                }\n            },\n\n            setSnippet: function(data) {\n                localStorage[data.page] = true;\n            },\n        };\n    }\n);"],"mappings":"AACAA,OAAM,0BAAC,CACH,QAAQ,CACR,gBAAgB,CAChB,yBAAyB,CAC5B,CAAE,SAASC,CAAC,CAAEC,CAAS,CAAEC,CAAE,CAAE,CAEtB,YAAY,CACZ,MAAO,CAEHC,YAAY,CAAE,SAAAA,aAAA,CAAW,CAazB,CAAC,CAQDC,WAAW,CAAE,SAAAA,YAASC,CAAI,CAAE,CAKxB,IAAI,CAACC,UAAU,CAACD,CAAI,CAAC,CACrBH,CAAE,CAACK,UAAU,CAACF,CAAI,CACtB,CAAC,CAEDG,QAAQ,CAAE,SAAAA,SAAUC,CAAI,CAAE,CAEtBT,CAAC,CAAC,sBAAsB,CAAC,CAACU,IAAI,CAAE,UAAW,CACvC,GAAI,CAAAC,CAAS,CAAGX,CAAC,CAAC,IAAI,CAAC,CAEvB,GAAIW,CAAS,CAACC,IAAI,CAAC,IAAI,CAAC,EAAIH,CAAI,CAAE,CAC9BE,CAAS,CAACE,IAAI,EAAE,CAGhBb,CAAC,CAAC,mBAAmB,CAAC,CAACc,IAAI,CAACC,YAAY,CADvBN,CAAI,CAAG,QAAQ,CACoB,CACxD,CAAC,IAAM,CACHE,CAAS,CAACK,IAAI,EAClB,CACJ,CAAC,CACL,CAAC,CAEDV,UAAU,CAAE,SAAAA,WAASG,CAAI,CAAE,CAKvB,GAA2B,OAAO,GAA9BM,YAAY,CAACN,CAAI,CAAa,CAAE,CAEhCR,CAAS,CAACgB,MAAM,CAAC,gBAAgB,CAAGR,CAAI,CAL9B,CAAC,CAAC,CAKsC,CAGjDS,IAAI,CAAC,SAASC,CAAI,CAAEC,CAAE,CAAE,CAKrBnB,CAAS,CAACoB,kBAAkB,CAAC,wBAAwB,CAAEF,CAAI,CAAEC,CAAE,CAAC,CAGhEL,YAAY,CAACN,CAAI,CAAC,GAAO,CAf1B,IAAI,CAgBED,QAAQ,CAACC,CAAI,CACtB,CAAC,CAAC,CAACa,IAAI,CAAC,UAAW,CAEfC,OAAO,CAACC,GAAG,CAAC,6EAA6E,CAC7F,CAAC,CAEL,CAAC,IAAM,CACH,IAAI,CAAChB,QAAQ,CAACC,CAAI,CACtB,CACJ,CAAC,CAEDgB,UAAU,CAAE,SAAAA,WAASpB,CAAI,CAAE,CACvBU,YAAY,CAACV,CAAI,CAACI,IAAI,CAAC,GAC3B,CACJ,CACJ,CAAC,CACJ"}