{"version":3,"sources":["../src/skezzy_timeline.js"],"names":["scope","factory","define","amd","instance","module","exports","name","$","jqui","moment","TimeScheduler","Options","GetSections","GetSchedule","Start","HeaderFormat","LowerFormat","Periods","Name","Label","TimeframePeriod","TimeframeOverall","TimeframeHeaders","Classes","SelectedPeriod","Element","MinRowHeight","ShowCurrentTime","ShowGoto","ShowToday","Text","NextButton","NextButtonTitle","PrevButton","PrevButtonTitle","TodayButton","TodayButtonTitle","GotoButton","GotoButtonTitle","Events","ItemMouseEnter","ItemMouseLeave","ItemClicked","ItemDropped","ItemResized","ItemMovement","ItemMovementStart","ItemMovementEnd","ItemEventClick","ItemEventMouseEnter","ItemEventMouseLeave","AllowDragging","AllowResizing","DisableOnMove","MaxHeight","Wrapper","HeaderWrap","TableWrap","ContentHeaderWrap","ContentWrap","TableHeader","TableContent","SectionWrap","Table","Sections","CachedSectionResult","CachedScheduleResult","SetupPrototypes","fn","tsAdd","input","val","dur","duration","tsAddOrSubtractDurationFromMoment","tsSubtract","mom","isAdding","ms","_milliseconds","d","_days","M","_months","currentDate","milliseconds","date","month","Math","min","daysInMonth","Init","overrideCache","console","log","find","draggable","empty","document","createElement","addClass","appendTo","CreateCalendar","FillSections","GetSelectedPeriod","period","i","length","SelectPeriod","GetEndOfPeriod","start","AddHeaderClasses","td","columnCount","specificHeader","trs","trArray","tr","tdArray","foundTD","prevIndex","nextIndex","colspan","complete","isEven","get","makeArray","trCount","tdCount","attr","isNaN","hasClass","header","minuteDiff","splits","end","thisTime","prevDate","fThisTime","fPrevDate","currentTimeIndex","abs","diff","toggleClass","headerCount","format","data","append","prevHeader","FillHeader","CreateSections","sections","timeCount","sectionContainer","headers","css","time","id","row","container","left","outerWidth","ShowCurrentTimeHandle","currentTime","currentTimeElem","currentDiff","clearTimeout","remove","setTimeout","CreateItems","items","item","event","section","itemElem","itemContent","itemDiff","itemSelfDiff","eventDiff","calcTop","calcLeft","calcWidth","foundStart","foundEnd","inSection","foundPos","elem","prevElem","needsNewRow","sectionID","max","classes","top","width","events","ev","at","label","pos","splice","SetupItemEvents","prop","elemTop","elemBottom","prev","prevElemTop","prevElemBottom","position","outerHeight","height","click","preventDefault","call","mouseenter","mouseleave","helper","zIndex","distance","snap","snapMode","snapTolerance","drag","ui","periodEnd","target","hide","children","not","stop","show","cancel","droppable","greedy","hoverClass","tolerance","drop","resizable","foundHandles","handles","resize","originalPosition","$this","ItemEventClicked","closest","override","FillSections_Callback","obj","FillSchedule","FillSchedule_Callback","title","periodContainer","timeContainer","selectedPeriod","text","Period_Clicked","href","GotoTimeShift_Clicked","TimeShift_Clicked","bottom","datepicker","onClose","onSelect","defaultDate","toDate","is","startOf"],"mappings":"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","sourcesContent":["﻿(function (scope, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery', 'jqueryui', 'local_tcs/_libs/moment'], factory);\n        return;\n    }\n\n    var instance = factory();\n\n    if (typeof module === 'object') {\n        module.exports = instance;\n        return;\n    }\n\n    scope[instance.name] = instance;\n})(this, function ($, jqui, moment) {\n    'use strict';\n\n    /* Based from this project:\n        https://github.com/Zallist/TimeScheduler\n    */\n\n    var TimeScheduler = {\n        Options: {\n            /* The function to call to fill up Sections.\n            Sections are cached. To clear cache, use TimelineScheduler.FillSections(true);\n            Callback accepts an array of sections in the format {\n                id: num,\n                name: string\n            }\n            */\n            GetSections: function (callback) { },\n\n            /* The function to call to fill up Items.\n            Callback accepts an array of items in the format \n            {\n                    id: num,\n                    name: string,\n                    sectionID: ID of Section,\n                    start: Moment of the start,\n                    end: Moment of the end,\n                    classes: string of classes to add,\n                    events: [\n                        {\n                            label: string to show in tooltip,\n                            at: Moment of event,\n                            classes: string of classes to add\n                        }\n                    ]\n                }\n            */\n            GetSchedule: function (callback, start, end) { },\n\n            /* The Moment to start the calendar at. RECOMMENDED: .startOf('day') */\n            Start: moment(),\n\n            /* The Moment format to use when displaying Header information */\n            HeaderFormat: 'Do MMM YYYY',\n\n            /* The Moment format to use when displaying Tooltip information */\n            LowerFormat: 'DD-MMM-YYYY HH:mm',\n\n            /* An array of Periods to be selectable by the user in the form of {\n                Name: unique string name to be used when selecting,\n                Label: string to display on the Period Button,\n                TimeframePeriod: number of minutes between intervals on the scheduler,\n                TimeframeOverall: number of minutes between the Start of the period and the End of the period,\n                TimeframeHeaderFormats: Array of formats to use for headers.\n            }\n            */\n            Periods: [\n                {\n                    Name: '2 days',\n                    Label: '2 days',\n                    TimeframePeriod: 120,\n                    TimeframeOverall: 2880,\n                    TimeframeHeaders: [\n                        'Do MMM',\n                        'HH'\n                    ],\n                    Classes: 'time-sch-period-2day'\n                },\n                {\n                    Name: '2 weeks',\n                    Label: '2 weeks',\n                    TimeframePeriod: 1440,\n                    TimeframeOverall: 20160,\n                    TimeframeHeaders: [\n                        'MMM',\n                        'Do'\n                    ],\n                    Classes: 'time-sch-period-2week'\n                }\n            ],\n\n            /* The Name of the period to select */\n            SelectedPeriod: '2 weeks',\n\n            /* The Element to put the scheduler on */\n            Element: $('<div></div>'),\n\n            /* The minimum height of each section */\n            MinRowHeight: 40,\n\n            /* Whether to show the Current Time or not */\n            ShowCurrentTime: true,\n\n            /* Whether to show the Goto button */\n            ShowGoto: true,\n\n            /* Whether to show the Today button */\n            ShowToday: true,\n\n            /* Text to use when creating the scheduler */\n            Text: {\n                NextButton: 'Next',\n                NextButtonTitle: 'Next period',\n                PrevButton: 'Prev',\n                PrevButtonTitle: 'Previous period',\n                TodayButton: 'Today',\n                TodayButtonTitle: 'Go to today',\n                GotoButton: 'Go to',\n                GotoButtonTitle: 'Go to specific date'\n            },\n\n            Events: {\n                // function (item) { }\n                ItemMouseEnter: null,\n\n                // function (item) { }\n                ItemMouseLeave: null,\n\n                // function (item) { }\n                ItemClicked: null,\n\n                // function (item, sectionID, start, end) { }\n                ItemDropped: null,\n\n                // function (item, start, end) { }\n                ItemResized: null,\n\n                // function (item, start, end) { }\n                // Called when any item move event is triggered (draggable.drag, resizable.resize)\n                ItemMovement: null,\n                // Called when any item move event starts (draggable.start, resizable.start)\n                ItemMovementStart: null,\n                // Called when any item move event ends (draggable.end, resizable.end)\n                ItemMovementEnd: null,\n\n                // function (eventData, itemData)\n                ItemEventClick: null,\n\n                // function (eventData, itemData)\n                ItemEventMouseEnter: null,\n\n                // function (eventData, itemData)\n                ItemEventMouseLeave: null\n            },\n\n            // Should dragging be enabled?\n            AllowDragging: false,\n\n            // Should resizing be enabled?\n            AllowResizing: false,\n\n            // Disable items on moving?\n            DisableOnMove: true,\n\n            // A given max height for the calendar, if unspecified, will expand forever\n            MaxHeight: null\n        },\n\n        Wrapper: null,\n\n        HeaderWrap: null,\n        TableWrap: null,\n\n        ContentHeaderWrap: null,\n        ContentWrap: null,\n\n        TableHeader: null,\n        TableContent: null,\n        SectionWrap: null,\n\n        Table: null,\n        Sections: {},\n\n        CachedSectionResult: null,\n        CachedScheduleResult: null,\n\n        SetupPrototypes: function () {\n            moment.fn.tsAdd = function (input, val) {\n                var dur;\n                // switch args to support add('s', 1) and add(1, 's')\n                if (typeof input === 'string') {\n                    dur = moment.duration(+val, input);\n                } else {\n                    dur = moment.duration(input, val);\n                }\n                this.tsAddOrSubtractDurationFromMoment(this, dur, 1);\n                return this;\n            };\n\n            moment.fn.tsSubtract = function (input, val) {\n                var dur;\n                // switch args to support subtract('s', 1) and subtract(1, 's')\n                if (typeof input === 'string') {\n                    dur = moment.duration(+val, input);\n                } else {\n                    dur = moment.duration(input, val);\n                }\n                this.tsAddOrSubtractDurationFromMoment(this, dur, -1);\n                return this;\n            };\n\n            // Replace the AddOrSubtract function so that zoning is not taken into account at all\n            moment.fn.tsAddOrSubtractDurationFromMoment = function (mom, duration, isAdding) {\n                var ms = duration._milliseconds,\n                    d = duration._days,\n                    M = duration._months,\n                    currentDate;\n\n                if (ms) {\n                    mom.milliseconds(mom.milliseconds() + ms * isAdding);\n                    //mom._d.setTime(+mom + ms * isAdding);\n                }\n                if (d) {\n                    mom.date(mom.date() + d * isAdding);\n                }\n                if (M) {\n                    currentDate = mom.date();\n                    mom.date(1)\n                        .month(mom.month() + M * isAdding)\n                        .date(Math.min(currentDate, mom.daysInMonth()));\n                }\n            };\n        },\n\n        /* Initializes the Timeline Scheduler with the given opts. If omitted, defaults are used. */\n        /* This should be used to recreate the scheduler with new defaults or refill items */\n        Init: function (overrideCache) {\n            console.log(\"skezzy_timeline.js -> Init() -> START\");\n            TimeScheduler.SetupPrototypes();\n\n            TimeScheduler.Options.Start = moment(TimeScheduler.Options.Start);\n\n            TimeScheduler.Options.Element.find('.ui-draggable').draggable('destroy');\n            TimeScheduler.Options.Element.empty();\n\n            TimeScheduler.Wrapper = $(document.createElement('div'))\n                .addClass('time-sch-wrapper')\n                .appendTo(TimeScheduler.Options.Element);\n\n            TimeScheduler.HeaderWrap = $(document.createElement('div'))\n                .addClass('time-sch-header-wrapper time-sch-clearfix')\n                .appendTo(TimeScheduler.Wrapper);\n\n            TimeScheduler.TableWrap = $(document.createElement('div'))\n                .addClass('time-sch-table-wrapper')\n                .appendTo(TimeScheduler.Wrapper);\n\n            TimeScheduler.CreateCalendar();\n            TimeScheduler.FillSections(overrideCache);\n        },\n\n        GetSelectedPeriod: function () {\n            console.log(\"skezzy_timeline.js -> GetSelectedPeriod() -> START\");\n            var period;\n\n            for (var i = 0; i < TimeScheduler.Options.Periods.length; i++) {\n                if (TimeScheduler.Options.Periods[i].Name === TimeScheduler.Options.SelectedPeriod) {\n                    period = TimeScheduler.Options.Periods[i];\n                    break;\n                }\n            }\n\n            if (!period) {\n                period = TimeScheduler.Options.Periods[0];\n                TimeScheduler.SelectPeriod(period.Name);\n            }\n\n            return period;\n        },\n\n        GetEndOfPeriod: function (start, period) {\n            console.log(\"skezzy_timeline.js -> GetEndOfPeriod() -> START\");\n            return moment(start).tsAdd('minutes', period.TimeframeOverall);\n        },\n\n        AddHeaderClasses: function (td, columnCount, specificHeader) {\n            console.log(\"skezzy_timeline.js -> AddHeaderClasses() -> START\");\n            var trs, trArray, tr,\n                tdArray, foundTD,\n                prevIndex, nextIndex, colspan,\n                complete, isEven;\n\n            trs = TimeScheduler.TableHeader.find('tr');\n\n            if (specificHeader !== undefined) {\n                trs = $(trs.get(specificHeader));\n            }\n\n            if (trs.length && trs.length > 0) {\n                trArray = $.makeArray(trs);\n\n                for (var trCount = 0; trCount < trArray.length; trCount++) {\n                    complete = false;\n                    nextIndex = 0;\n                    tr = $(trArray[trCount]);\n                    tdArray = $.makeArray(tr.find('.time-sch-date-header'));\n\n                    for (var tdCount = 0; tdCount < tdArray.length && !complete; tdCount++) {\n                        foundTD = $(tdArray[tdCount]);\n\n                        colspan = Number(foundTD.attr('colspan'));\n                        if (colspan && !isNaN(colspan) && colspan > 0) {\n                            prevIndex = (nextIndex ? nextIndex : 0);\n                            nextIndex = prevIndex + colspan;\n                        }\n                        else {\n                            prevIndex = (nextIndex ? nextIndex : 0);\n                            nextIndex = prevIndex + 1;\n                        }\n\n                        if (prevIndex === columnCount) {\n                            td.addClass('time-sch-header-' + trCount + '-date-start');\n                        }\n                        if (nextIndex - 1 === columnCount) {\n                            td.addClass('time-sch-header-' + trCount + '-date-end');\n                        }\n\n                        if (prevIndex <= columnCount && columnCount < nextIndex) {\n                            complete = true;\n                            isEven = tdCount % 2 === 0;\n\n                            td.addClass('time-sch-header-' + trCount + '-date-column-' + tdCount)\n                                .addClass('time-sch-header-' + trCount + '-date-' + (isEven ? 'even' : 'odd'));\n\n                            if (foundTD.hasClass('time-sch-header-' + trCount + '-current-time')) {\n                                td.addClass('time-sch-header-' + trCount + '-current-time');\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        CreateCalendar: function () {\n            console.log(\"skezzy_timeline.js -> CreateCalendar() -> START\");\n            var tr, td, header,\n                minuteDiff, splits, period, end,\n                thisTime, prevDate, fThisTime, fPrevDate, colspan,\n                currentTimeIndex,\n                isEven;\n\n            colspan = 0;\n\n            period = TimeScheduler.GetSelectedPeriod();\n            end = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n\n            minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(end, 'minutes'));\n            splits = (minuteDiff / period.TimeframePeriod);\n\n            TimeScheduler.ContentHeaderWrap = $(document.createElement('div'))\n                .addClass('time-sch-content-header-wrap')\n                .appendTo(TimeScheduler.TableWrap);\n\n            TimeScheduler.ContentWrap = $(document.createElement('div'))\n                .addClass('time-sch-content-wrap')\n                .appendTo(TimeScheduler.TableWrap);\n\n            TimeScheduler.TableHeader = $(document.createElement('table'))\n                .addClass('time-sch-table time-sch-table-header')\n                .appendTo(TimeScheduler.ContentHeaderWrap);\n\n            TimeScheduler.TableContent = $(document.createElement('table'))\n                .addClass('time-sch-table time-sch-table-content')\n                .appendTo(TimeScheduler.ContentWrap);\n\n            TimeScheduler.SectionWrap = $(document.createElement('div'))\n                .addClass('time-sch-section-wrapper')\n                .appendTo(TimeScheduler.ContentWrap);\n\n            if (period.Classes) {\n                TimeScheduler.TableWrap.toggleClass(period.Classes, true);\n            }\n\n            for (var headerCount = 0; headerCount < period.TimeframeHeaders.length; headerCount++) {\n                prevDate = null;\n                fPrevDate = null;\n\n                isEven = true;\n                colspan = 0;\n                currentTimeIndex = 0;\n\n                header = period.TimeframeHeaders[headerCount];\n\n                tr = $(document.createElement('tr'))\n                    .addClass('time-sch-times time-sch-times-header-' + headerCount)\n                    .appendTo(TimeScheduler.TableHeader);\n\n                td = $(document.createElement('td'))\n                    .addClass('time-sch-section time-sch-section-header')\n                    .appendTo(tr);\n\n                for (var i = 0; i < splits; i++) {\n                    thisTime = moment(TimeScheduler.Options.Start)\n                        .tsAdd('minutes', (i * period.TimeframePeriod));\n\n                    fThisTime = thisTime.format(header);\n\n                    if (fPrevDate !== fThisTime) {\n                        // If there is no prevDate, it's the Section Header\n                        if (prevDate) {\n                            td.attr('colspan', colspan);\n                            colspan = 0;\n\n                            if (moment() >= prevDate && moment() < thisTime) {\n                                td.addClass('time-sch-header-' + headerCount + '-current-time');\n                            }\n                        }\n\n                        prevDate = thisTime;\n                        fPrevDate = fThisTime;\n\n                        td = $(document.createElement('td'))\n                            .data('header-row', headerCount)\n                            .data('column-count', i)\n                            .data('column-is-even', isEven)\n                            .addClass('time-sch-date time-sch-date-header')\n                            .append(fThisTime)\n                            .appendTo(tr);\n\n                        td  .addClass('time-sch-header-' + headerCount + '-date-start')\n                            .addClass('time-sch-header-' + headerCount + '-date-end')\n                            .addClass('time-sch-header-' + headerCount + '-date-column-' + currentTimeIndex)\n                            .addClass('time-sch-header-' + headerCount + '-date-' + ((currentTimeIndex % 2 === 0) ? 'even' : 'odd'));\n\n                        for (var prevHeader = 0; prevHeader < headerCount; prevHeader++) {\n                            TimeScheduler.AddHeaderClasses(td, i, prevHeader);\n                        }\n\n                        currentTimeIndex += 1;\n                    }\n\n                    colspan += 1;\n                }\n\n                td.attr('colspan', colspan);\n            }\n\n            TimeScheduler.FillHeader();\n        },\n\n        CreateSections: function (sections) {\n            console.log(\"skezzy_timeline.js -> CreateSections() -> START\");\n            var timeCount, tr, td, sectionContainer, headers, i;\n\n            timeCount = 1;\n            headers = $.makeArray(TimeScheduler.TableHeader.find('tr'));\n\n            for (i = 0; i < headers.length; i++) {\n                if (timeCount < $(headers[i]).find('.time-sch-date-header').length) {\n                    timeCount = $(headers[i]).find('.time-sch-date-header').length;\n                }\n            }\n\n            for (i = 0; i < sections.length; i++) {\n                tr = $(document.createElement('tr'))\n                    .addClass('time-sch-section-row')\n                    .addClass(i % 2 === 0 ? 'time-sch-section-even' : 'time-sch-section-odd')\n                    .css('height', TimeScheduler.Options.MinRowHeight)\n                    .appendTo(TimeScheduler.TableContent);\n\n                sectionContainer = $(document.createElement('div'))\n                    .addClass('time-sch-section-container')\n                    .css('height', TimeScheduler.Options.MinRowHeight)\n                    .data('section', sections[i])\n                    .appendTo(TimeScheduler.SectionWrap);\n\n                td = $(document.createElement('td'))\n                    .addClass('time-sch-section time-sch-section-content')\n                    .data('section', sections[i])\n                    .append(sections[i].name)\n                    .appendTo(tr);\n\n                for (var time = 0; time < timeCount; time++) {\n                    td = $(document.createElement('td'))\n                        .addClass('time-sch-date time-sch-date-content')\n                        .appendTo(tr);\n\n                    TimeScheduler.AddHeaderClasses(td, time);\n                }\n\n                TimeScheduler.Sections[sections[i].id] = {\n                    row: tr,\n                    container: sectionContainer\n                };\n            }\n\n            TimeScheduler.SectionWrap.css({\n                left: TimeScheduler.Options.Element.find('.time-sch-section').outerWidth()\n            });\n\n            if (TimeScheduler.Options.ShowCurrentTime) {\n                TimeScheduler.ShowCurrentTime();\n            }\n        },\n\n        ShowCurrentTimeHandle: null,\n        ShowCurrentTime: function () {\n            console.log(\"skezzy_timeline.js -> ShowCurrentTime() -> START\");\n            var currentTime, currentTimeElem, minuteDiff, currentDiff, end;\n\n            // Stop any other timeouts happening\n            if (TimeScheduler.ShowCurrentTimeHandle) {\n                clearTimeout(TimeScheduler.ShowCurrentTimeHandle);\n            }\n\n            currentTime = moment();\n            end = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, TimeScheduler.GetSelectedPeriod());\n            minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(end, 'minutes'));\n            currentDiff = Math.abs(TimeScheduler.Options.Start.diff(currentTime, 'minutes'));\n\n            currentTimeElem = TimeScheduler.Options.Element.find('.time-sch-current-time');\n            currentTimeElem.remove();\n\n            if (currentTime >= TimeScheduler.Options.Start && currentTime <= end) {\n                currentTimeElem = $(document.createElement('div'))\n                    .addClass('time-sch-current-time')\n                    .css('left', ((currentDiff / minuteDiff) * 100) + '%')\n                    .attr('title', currentTime.format(TimeScheduler.Options.LowerFormat))\n                    .appendTo(TimeScheduler.SectionWrap);\n            }\n\n            // Since we're only comparing minutes, we may as well only check once every 30 seconds\n            TimeScheduler.ShowCurrentTimeHandle = setTimeout(TimeScheduler.ShowCurrentTime, 30000);\n        },\n\n        CreateItems: function (items) {\n            console.log(\"skezzy_timeline.js -> CreateItems() -> START\");\n            console.log(\"skezzy_timeline.js -> CreateItems -> START\");\n            var item, event, section, itemElem, eventElem, itemContent, itemName, itemIcon;\n            var minuteDiff, splits, itemDiff, itemSelfDiff, eventDiff, calcTop, calcLeft, calcWidth, foundStart, foundEnd;\n            var inSection = {}, foundPos, elem, prevElem, needsNewRow;\n            var period, end, i;\n\n            period = TimeScheduler.GetSelectedPeriod();\n            end = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n\n            minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(end, 'minutes'));\n\n            for (i = 0; i < items.length; i++) {\n                item = items[i];\n                section = TimeScheduler.Sections[item.sectionID];\n\n                if (section) {\n                    if (!inSection[item.sectionID]) {\n                        inSection[item.sectionID] = [];\n                    }\n\n                    if (item.start <= end && item.end >= TimeScheduler.Options.Start) {\n                        foundPos = null;\n\n                        foundStart = moment(Math.max(item.start, TimeScheduler.Options.Start));\n                        foundEnd = moment(Math.min(item.end, end));\n\n                        itemDiff = foundStart.diff(TimeScheduler.Options.Start, 'minutes');\n                        itemSelfDiff = Math.abs(foundStart.diff(foundEnd, 'minutes'));\n\n                        calcTop = 0;\n                        calcLeft = (itemDiff / minuteDiff) * 100;\n                        calcWidth = (itemSelfDiff / minuteDiff) * 100;\n\n                        itemElem = $(document.createElement('div'))\n                            .addClass('time-sch-item ' + (item.classes ? item.classes : ''))\n                            .css({\n                                top: calcTop,\n                                left: calcLeft + '%',\n                                width: calcWidth + '%'\n                            })\n                            .appendTo(section.container);\n\n                        itemContent = $(document.createElement('div'))\n                            .addClass('time-sch-item-content')\n                            .appendTo(itemElem);\n\n                        if (item.name) {\n                            $(document.createElement('div'))\n                                .append(item.name)\n                                .appendTo(itemContent);\n                        }\n\n                        if (item.events) {\n                            for (var ev = 0; ev < item.events.length; ev++) {\n                                event = item.events[ev];\n\n                                eventDiff = (event.at.diff(foundStart, 'minutes') / itemSelfDiff) * 100;\n\n                                $(document.createElement('div'))\n                                    .addClass('time-sch-item-event ' + (event.classes ? event.classes : ''))\n                                    .css('left', eventDiff + '%')\n                                    .attr('title', event.at.format(TimeScheduler.Options.LowerFormat) + ' - ' + event.label)\n                                    .data('event', event)\n                                    .appendTo(itemElem);\n                            }\n                        }\n\n                        if (item.start >= TimeScheduler.Options.Start) {\n                            $(document.createElement('div'))\n                                .addClass('time-sch-item-start')\n                                .appendTo(itemElem);\n                        }\n                        if (item.end <= end) {\n                            $(document.createElement('div'))\n                                .addClass('time-sch-item-end')\n                                .appendTo(itemElem);\n                        }\n\n                        item.Element = itemElem;\n\n                        // Place this in the current section array in its sorted position\n                        for (var pos = 0; pos < inSection[item.sectionID].length; pos++) {\n                            if (inSection[item.sectionID][pos].start > item.start) {\n                                foundPos = pos;\n                                break;\n                            }\n                        }\n\n                        if (foundPos === null) {\n                            foundPos = inSection[item.sectionID].length;\n                        }\n\n                        inSection[item.sectionID].splice(foundPos, 0, item);\n\n                        itemElem.data('item', item);\n\n                        TimeScheduler.SetupItemEvents(itemElem);\n                    }\n                }\n            }\n\n            // Sort out layout issues so no elements overlap\n            for (var prop in inSection) {\n                section = TimeScheduler.Sections[prop];\n\n                for (i = 0; i < inSection[prop].length; i++) {\n                    var elemTop, elemBottom;\n                    elem = inSection[prop][i];\n\n                    // If we're passed the first item in the row\n                    for (var prev = 0; prev < i; prev++) {\n                        var prevElemTop, prevElemBottom;\n                        prevElem = inSection[prop][prev];\n\n                        prevElemTop = prevElem.Element.position().top;\n                        prevElemBottom = prevElemTop + prevElem.Element.outerHeight();\n\n                        elemTop = elem.Element.position().top;\n                        elemBottom = elemTop + elem.Element.outerHeight();\n\n                        // (elem.start must be between prevElem.start and prevElem.end OR\n                        //  elem.end must be between prevElem.start and prevElem.end) AND\n                        // (elem.top must be between prevElem.top and prevElem.bottom OR\n                        //  elem.bottom must be between prevElem.top and prevElem.bottom)\n                        needsNewRow =\n                            (\n                                (prevElem.start <= elem.start && elem.start <= prevElem.end) ||\n                                (prevElem.start <= elem.end && elem.end <= prevElem.end)\n                            ) && (\n                                (prevElemTop <= elemTop && elemTop <= prevElemBottom) ||\n                                (prevElemTop <= elemBottom && elemBottom <= prevElemBottom)\n                            );\n\n                        if (needsNewRow) {\n                            elem.Element.css('top', prevElemBottom + 1);\n                        }\n                    }\n\n                    elemBottom = elem.Element.position().top + elem.Element.outerHeight() + 1;\n\n                    if (elemBottom > section.container.height()) {\n                        section.container.css('height', elemBottom);\n                        section.row.css('height', elemBottom);\n                    }\n                }\n            }\n        },\n\n        SetupItemEvents: function (itemElem) {\n            console.log(\"skezzy_timeline.js -> SetupItemEvents() -> START\");\n            if (TimeScheduler.Options.Events.ItemClicked) {\n                itemElem.click(function (event) {\n                    event.preventDefault();\n                    TimeScheduler.Options.Events.ItemClicked.call(this, $(this).data('item'));\n                });\n            }\n\n            if (TimeScheduler.Options.Events.ItemMouseEnter) {\n                itemElem.mouseenter(function (event) {\n                    TimeScheduler.Options.Events.ItemMouseEnter.call(this, $(this).data('item'));\n                });\n            }\n\n            if (TimeScheduler.Options.Events.ItemMouseLeave) {\n                itemElem.mouseleave(function (event) {\n                    TimeScheduler.Options.Events.ItemMouseLeave.call(this, $(this).data('item'));\n                });\n            }\n\n            if (TimeScheduler.Options.AllowDragging) {\n                itemElem.draggable({\n                    helper: 'clone',\n                    zIndex: 1,\n                    appendTo: TimeScheduler.SectionWrap,\n                    distance: 5,\n                    snap: '.time-sch-section-container',\n                    snapMode: 'inner',\n                    snapTolerance: 10,\n                    drag: function (event, ui) {\n                        console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (draggable event) - drag() -> START\");\n                        var item, start, end;\n                        var period, periodEnd, minuteDiff;\n\n                        if (TimeScheduler.Options.Events.ItemMovement) {\n                            period = TimeScheduler.GetSelectedPeriod();\n                            periodEnd = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n                            minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(periodEnd, 'minutes'));\n\n                            item = $(event.target).data('item');\n\n                            start = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * (ui.helper.position().left / TimeScheduler.SectionWrap.width()));\n                            end = moment(start).tsAdd('minutes', Math.abs(item.start.diff(item.end, 'minutes')));\n\n                            // If the start is before the start of our calendar, add the offset\n                            if (item.start < TimeScheduler.Options.Start) {\n                                start.tsAdd('minutes', item.start.diff(TimeScheduler.Options.Start, 'minutes'));\n                                end.tsAdd('minutes', item.start.diff(TimeScheduler.Options.Start, 'minutes'));\n                            }\n\n                            TimeScheduler.Options.Events.ItemMovement.call(this, item, start, end);\n                        }\n                    },\n                    start: function (event, ui) {\n                        console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (draggable event) - start() -> START\");\n                        $(this).hide();\n\n                        // We only want content to show, not events or resizers\n                        ui.helper.children().not('.time-sch-item-content').remove();\n\n                        if (TimeScheduler.Options.Events.ItemMovementStart) {\n                            TimeScheduler.Options.Events.ItemMovementStart.call(this);\n                        }\n                    },\n                    stop: function (event, ui) {\n                        console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (draggable event) - stop() -> START\");\n                        if ($(this).length) {\n                            $(this).show();\n                        }\n\n                        if (TimeScheduler.Options.Events.ItemMovementEnd) {\n                            TimeScheduler.Options.Events.ItemMovementEnd.call(this);\n                        }\n                    },\n                    cancel: '.time-sch-item-end, .time-sch-item-start, .time-sch-item-event'\n                });\n\n                $('.time-sch-section-container').droppable({\n                    greedy: true,\n                    hoverClass: 'time-sch-droppable-hover',\n                    tolerance: 'pointer',\n                    drop: function (event, ui) {\n                        console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (droppable event) - drop() -> START\");\n                        var item, sectionID, start, end;\n                        var period, periodEnd, minuteDiff;\n\n                        period = TimeScheduler.GetSelectedPeriod();\n                        periodEnd = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n                        minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(periodEnd, 'minutes'));\n\n                        item = ui.draggable.data('item');\n                        sectionID = $(this).data('section').id;\n\n                        start = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * (ui.helper.position().left / $(this).width()));\n                        end = moment(start).tsAdd('minutes', Math.abs(item.start.diff(item.end, 'minutes')));\n\n                        // If the start is before the start of our calendar, add the offset\n                        if (item.start < TimeScheduler.Options.Start) {\n                            start.tsAdd('minutes', item.start.diff(TimeScheduler.Options.Start, 'minutes'));\n                            end.tsAdd('minutes', item.start.diff(TimeScheduler.Options.Start, 'minutes'));\n                        }\n\n                        // Append original to this section and reposition it while we wait\n                        ui.draggable.appendTo($(this));\n                        ui.draggable.css({\n                            left: ui.helper.position().left - $(this).position().left,\n                            top: ui.helper.position().top - $(this).position().top\n                        });\n\n                        if (TimeScheduler.Options.DisableOnMove) {\n                            if (ui.draggable.data('uiDraggable')) {\n                                ui.draggable.draggable('disable');\n                            }\n                            if (ui.draggable.data('uiResizable')) {\n                                ui.draggable.resizable('disable');\n                            }\n                        }\n                        ui.draggable.show();\n\n                        if (TimeScheduler.Options.Events.ItemDropped) {\n                            // Time for a hack, JQueryUI throws an error if the draggable is removed in a drop\n                            setTimeout(function () {\n                                TimeScheduler.Options.Events.ItemDropped.call(this, item, sectionID, start, end);\n                            }, 0);\n                        }\n                    }\n                });\n            }\n\n            if (TimeScheduler.Options.AllowResizing) {\n                var foundHandles = null;\n\n                if (itemElem.find('.time-sch-item-start').length && itemElem.find('.time-sch-item-end').length) {\n                    foundHandles = 'e, w';\n                }\n                else if (itemElem.find('.time-sch-item-start').length) {\n                    foundHandles = 'w';\n                }\n                else if (itemElem.find('.time-sch-item-end').length) {\n                    foundHandles = 'e';\n                }\n\n                if (foundHandles) {\n                    itemElem.resizable({\n                        handles: foundHandles,\n                        resize: function (event, ui) {\n                            console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (resizable event) - resize() -> START\");\n                            var item, start, end;\n                            var period, periodEnd, minuteDiff;\n\n                            if (TimeScheduler.Options.Events.ItemMovement) {\n                                period = TimeScheduler.GetSelectedPeriod();\n                                periodEnd = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n                                minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(periodEnd, 'minutes'));\n\n                                item = $(this).data('item');\n\n                                if (ui.position.left !== ui.originalPosition.left) {\n                                    // Left handle moved\n\n                                    start = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * ($(this).position().left / TimeScheduler.SectionWrap.width()));\n                                    end = item.end;\n                                }\n                                else {\n                                    // Right handle moved\n\n                                    start = item.start;\n                                    end = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * (($(this).position().left + $(this).width()) / TimeScheduler.SectionWrap.width()));\n                                }\n\n                                TimeScheduler.Options.Events.ItemMovement.call(this, item, start, end);\n                            }\n                        },\n                        start: function (event, ui) {\n                            console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (resizable event) - start() -> START\");\n                            // We don't want any events to show\n                            $(this).find('.time-sch-item-event').hide();\n\n                            if (TimeScheduler.Options.Events.ItemMovementStart) {\n                                TimeScheduler.Options.Events.ItemMovementStart.call(this);\n                            }\n                        },\n                        stop: function (event, ui) {\n                            console.log(\"skezzy_timeline.js -> SetupItemEvents() -> (resizable event) - stop() -> START\");\n                            var item, start, end;\n                            var period, periodEnd, minuteDiff, section;\n                            var $this;\n\n                            $this = $(this);\n\n                            period = TimeScheduler.GetSelectedPeriod();\n                            periodEnd = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n                            minuteDiff = Math.abs(TimeScheduler.Options.Start.diff(periodEnd, 'minutes'));\n\n                            item = $this.data('item');\n\n                            if (ui.position.left !== ui.originalPosition.left) {\n                                // Left handle moved\n\n                                start = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * ($this.position().left / TimeScheduler.SectionWrap.width()));\n                                end = item.end;\n                            }\n                            else {\n                                // Right handle moved\n\n                                start = item.start;\n                                end = moment(TimeScheduler.Options.Start).tsAdd('minutes', minuteDiff * (($this.position().left + $this.width()) / TimeScheduler.SectionWrap.width()));\n                            }\n\n                            if (TimeScheduler.Options.DisableOnMove) {\n                                if ($this.data('uiDraggable')) {\n                                    $this.draggable('disable');\n                                }\n                                if ($this.data('uiResizable')) {\n                                    $this.resizable('disable');\n                                }\n\n                                $this.find('.time-sch-item-event').show();\n                            }\n\n                            if (TimeScheduler.Options.Events.ItemMovementEnd) {\n                                TimeScheduler.Options.Events.ItemMovementEnd.call(this);\n                            }\n\n                            if (TimeScheduler.Options.Events.ItemResized) {\n                                TimeScheduler.Options.Events.ItemResized.call(this, item, start, end);\n                            }\n                        }\n                    });\n                }\n            }\n\n            if (TimeScheduler.Options.Events.ItemEventClicked) {\n                itemElem.find('.time-sch-item-event').click(function (event) {\n                    var itemElem = $(this).closest('.time-sch-item');\n\n                    event.preventDefault();\n                    TimeScheduler.Options.Events.ItemEventClicked.call(this, $(this).data('event'), itemElem.data('item'));\n                });\n            }\n            if (TimeScheduler.Options.Events.ItemEventMouseEnter) {\n                itemElem.find('.time-sch-item-event').mouseenter(function (event) {\n                    var itemElem = $(this).closest('.time-sch-item');\n\n                    event.preventDefault();\n                    TimeScheduler.Options.Events.ItemEventClicked.call(this, $(this).data('event'), itemElem.data('item'));\n                });\n            }\n            if (TimeScheduler.Options.Events.ItemEventMouseLeave) {\n                itemElem.find('.time-sch-item-event').mouseleave(function (event) {\n                    var itemElem = $(this).closest('.time-sch-item');\n\n                    event.preventDefault();\n                    TimeScheduler.Options.Events.ItemEventClicked.call(this, $(this).data('event'), itemElem.data('item'));\n                });\n            }\n        },\n\n        /* Call this with \"true\" as override, and sections will be reloaded. Otherwise, cached sections will be used */\n        FillSections: function (override) {\n            console.log(\"skezzy_timeline.js -> FillSections() -> START\");\n            if (!TimeScheduler.CachedSectionResult || override) {\n                TimeScheduler.Options.GetSections.call(this, TimeScheduler.FillSections_Callback);\n            }\n            else {\n                TimeScheduler.FillSections_Callback(TimeScheduler.CachedSectionResult);\n            }\n        },\n\n        FillSections_Callback: function (obj) {\n            console.log(\"skezzy_timeline.js -> FillSections_Callback() -> START\");\n            TimeScheduler.CachedSectionResult = obj;\n\n            TimeScheduler.CreateSections(obj);\n            TimeScheduler.FillSchedule();\n        },\n\n        FillSchedule: function () {\n            console.log(\"skezzy_timeline.js -> FillSchedule() -> START\");\n            var period, end;\n\n            period = TimeScheduler.GetSelectedPeriod();\n            end = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, period);\n\n            TimeScheduler.Options.GetSchedule.call(this, TimeScheduler.FillSchedule_Callback, TimeScheduler.Options.Start, end);\n        },\n\n        FillSchedule_Callback: function (obj) {\n            console.log(\"skezzy_timeline.js -> FillSchedule_Callback() -> START\");\n            TimeScheduler.CachedScheduleResult = obj;\n            TimeScheduler.CreateItems(obj);\n        },\n\n        FillHeader: function () {\n            console.log(\"skezzy_timeline.js -> FillHeader() -> START\");\n            var durationString, title, periodContainer, timeContainer, periodButton, timeButton;\n            var selectedPeriod, end, period;\n\n            periodContainer = $(document.createElement('div'))\n                .addClass('time-sch-period-container');\n\n            timeContainer = $(document.createElement('div'))\n                .addClass('time-sch-time-container');\n\n            title = $(document.createElement('div'))\n                .addClass('time-sch-title');\n\n            TimeScheduler.HeaderWrap\n                .empty()\n                .append(periodContainer, timeContainer, title);\n\n            selectedPeriod = TimeScheduler.GetSelectedPeriod();\n            end = TimeScheduler.GetEndOfPeriod(TimeScheduler.Options.Start, selectedPeriod);\n\n            // Header needs a title\n            // We take away 1 minute \n            title.text(TimeScheduler.Options.Start.format(TimeScheduler.Options.HeaderFormat) + ' - ' + end.tsAdd('minutes', -1).format(TimeScheduler.Options.HeaderFormat));\n\n            for (var i = 0; i < TimeScheduler.Options.Periods.length; i++) {\n                period = TimeScheduler.Options.Periods[i];\n\n                $(document.createElement('a'))\n                    .addClass('time-sch-period-button time-sch-button')\n                    .addClass(period.Name === selectedPeriod.Name ? 'time-sch-selected-button' : '')\n                    .attr('href', '#')\n                    .append(period.Label)\n                    .data('period', period)\n                    .click(TimeScheduler.Period_Clicked)\n                    .appendTo(periodContainer);\n            }\n\n            if (TimeScheduler.Options.ShowGoto) {\n                $(document.createElement('a'))\n                    .addClass('time-sch-time-button time-sch-time-button-goto time-sch-button')\n                    .attr({\n                        href: '#',\n                        title: TimeScheduler.Options.Text.GotoButtonTitle\n                    })\n                    .append(TimeScheduler.Options.Text.GotoButton)\n                    .click(TimeScheduler.GotoTimeShift_Clicked)\n                    .appendTo(timeContainer);\n            }\n\n            if (TimeScheduler.Options.ShowToday) {\n                $(document.createElement('a'))\n                    .addClass('time-sch-time-button time-sch-time-button-today time-sch-button')\n                    .attr({\n                        href: '#',\n                        title: TimeScheduler.Options.Text.TodayButtonTitle\n                    })\n                    .append(TimeScheduler.Options.Text.TodayButton)\n                    .click(TimeScheduler.TimeShift_Clicked)\n                    .appendTo(timeContainer);\n            }\n\n            $(document.createElement('a'))\n                .addClass('time-sch-time-button time-sch-time-button-prev time-sch-button')\n                .attr({\n                    href: '#',\n                    title: TimeScheduler.Options.Text.PrevButtonTitle\n                })\n                .append(TimeScheduler.Options.Text.PrevButton)\n                .click(TimeScheduler.TimeShift_Clicked)\n                .appendTo(timeContainer);\n\n            $(document.createElement('a'))\n                .addClass('time-sch-time-button time-sch-time-button-next time-sch-button')\n                .attr({\n                    href: '#',\n                    title: TimeScheduler.Options.Text.NextButtonTitle\n                })\n                .append(TimeScheduler.Options.Text.NextButton)\n                .click(TimeScheduler.TimeShift_Clicked)\n                .appendTo(timeContainer);\n        },\n\n        GotoTimeShift_Clicked: function (event) {\n            console.log(\"skezzy_timeline.js -> GotoTimeShift_Clicked() -> START\");\n            event.preventDefault();\n\n            $(document.createElement('input'))\n                .attr('type', 'text')\n                .css({\n                    position: 'absolute',\n                    left: 0,\n                    bottom: 0\n                })\n                .appendTo($(this))\n                .datepicker({\n                    onClose: function () {\n                        console.log(\"skezzy_timeline.js -> GotoTimeShift_Clicked() -> onClose() -> START\");\n                        $(this).remove();\n                    },\n                    onSelect: function (date) {\n                        console.log(\"skezzy_timeline.js -> GotoTimeShift_Clicked() -> onSelect() -> START\");\n                        TimeScheduler.Options.Start = moment(date);\n                        TimeScheduler.Init();\n                    },\n                    defaultDate: TimeScheduler.Options.Start.toDate()\n                })\n                .datepicker('show')\n                .hide();\n        },\n        TimeShift_Clicked: function (event) {\n            console.log(\"skezzy_timeline.js -> TimeShift_Clicked() -> START\");\n            var period;\n\n            event.preventDefault();\n            period = TimeScheduler.GetSelectedPeriod();\n\n            if ($(this).is('.time-sch-time-button-today')) {\n                TimeScheduler.Options.Start = moment().startOf('day');\n            }\n            else if ($(this).is('.time-sch-time-button-prev')) {\n                TimeScheduler.Options.Start.tsAdd('minutes', period.TimeframeOverall * -1);\n            }\n            else if ($(this).is('.time-sch-time-button-next')) {\n                TimeScheduler.Options.Start.tsAdd('minutes', period.TimeframeOverall);\n            }\n\n            TimeScheduler.Init();\n        },\n\n        /* Selects the period with the given name */\n        SelectPeriod: function (name) {\n            console.log(\"skezzy_timeline.js -> SelectPeriod() -> START\");\n            TimeScheduler.Options.SelectedPeriod = name;\n            TimeScheduler.Init();\n        },\n\n        Period_Clicked: function (event) {\n            console.log(\"skezzy_timeline.js -> Period_Clicked() -> START\");\n            event.preventDefault();\n            TimeScheduler.SelectPeriod($(this).data('period').Name);\n        }\n    };\n\n    return TimeScheduler;\n});"],"file":"skezzy_timeline.min.js"}