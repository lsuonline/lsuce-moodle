function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a){if("function"==typeof define&&define.amd){define ("local_tcs/_libs/jquery.skedTape",["jquery"],a)}else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){module.exports=function(b,c){if(c===void 0){if("undefined"!=typeof window){c=require("jquery")}else{c=require("jquery")(b)}}a(c);return c}}else{a(jQuery)}})(function(a){var n=new Date().getTimezoneOffset(),o=function(b){a.extend(this,b);this.$el=b&&b.el?a(b.el):a("<div/>");this.el=b.el instanceof a?b.el[0]:b.el;this.locations=[];this.events=[];this.lastEventId=0;this.format=a.extend({},o.defaultFormatters,b&&b.formatters||{});this.$el.on("click",".sked-tape__event",a.proxy(this.handleEventClick,this));this.$el.on("contextmenu",".sked-tape__event",a.proxy(this.handleEventContextMenu,this));this.$el.on("click",".sked-tape__timeline-wrap",a.proxy(this.handleTimelineClick,this));this.$el.on("contextmenu",".sked-tape__timeline-wrap",a.proxy(this.handleTimelineContextMenu,this));this.$el.on("mousemove",".sked-tape__timeline-wrap",a.proxy(this.handleMouseMove,this));this.$el.on("keydown",".sked-tape__time-frame",a.proxy(this.handleKeyDown,this));this.$el.on("wheel",".sked-tape__time-frame",a.proxy(this.handleWheel,this));this.$el.on("click",".sked-tape__intersection",a.proxy(this.handleIntersectionClick,this));this.$el.on("contextmenu",".sked-tape__intersection",a.proxy(this.handleIntersectionContextMenu,this))};o.defaultFormatters={date:function date(a,b,c){b=b||"m";var d=a.toISOString().substring(0,10).split("-");d="l"===b?d.reverse():d;d="m"===b?[parseInt(d[1]),parseInt(d[2]),d[0]]:d;return d.join(c||("m"===b?"/":"."))},roundDuration:function roundDuration(a){return a},duration:function duration(a,b){var c=Math.floor(a/s),d=Math.floor(a%s/r),e=b&&b.hrs||"hrs",f=b&&b.min||"min",g=c?c+e:"";g+=c&&d?" ":"";g+=d?d+f:"";return g},hours:function hours(a){return(10>a?"0":"")+a+":00"},time:function time(a){var b=a.getHours(),c=a.getMinutes();return(10>b?"0"+b:b)+":"+(10>c?"0"+c:c)}};o.prototype={constructor:o,setTimespan:function setTimespan(a,b,d){console.log("skidMark -> setTimespan() -> what is start: "+a);console.log("skidMark -> setTimespan() -> what is end: "+b);if(!c(a,b)){throw new Error("Invalid time range: "+JSON.stringify([a,b]))}this.start=k(a);this.end=l(b);return this.updateUnlessOption(d)},setDate:function setDate(a,b,c){console.log("skidMark -> setDate() -> what is minHours: "+b);console.log("skidMark -> setDate() -> what is maxHours: "+c);var d=new Date(a);d.setHours(0,0,0,0);var e=new Date(d);e.setHours(b||0);if(c&&24!=c){var f=new Date(d.getTime());f.setHours(c)}else{var f=new Date(d.getTime()+q)}return this.setTimespan(e,f)},getZoom:function getZoom(){return this.zoom},setZoom:function setZoom(a){a=a||1;if(1>a){this.zoom=1;return this}if(a>this.maxZoom){this.zoom=this.maxZoom;return this}this.zoom=a;if(this.$canvas){var b=this.$canvas.data("orig-min-width")*a;this.$canvas.css("min-width",Math.round(b)+"px")}return this},resetZoom:function resetZoom(){return this.setZoom()},zoomIn:function zoomIn(a){return this.setZoom(this.zoom+(a||this.zoomStep))},zoomOut:function zoomOut(a){return this.setZoom(this.zoom-(a||this.zoomStep))},locationExists:function locationExists(b){var c=!1;a.each(this.locations,function(a,d){if(d.id==b){c=!0;return!1}});return c},setLocations:function setLocations(b,c){this.events=[];this.locations=b&&b.map(function(b){return{id:b.id,name:b.name,order:b.order||0,tzOffset:b.tzOffset,userData:b.userData?a.extend({},b.userData):{}}});return this.updateUnlessOption(c)},addLocations:function addLocations(a,b){this.locations=this.locations.concat(a);return this.updateUnlessOption(b)},addLocation:function addLocation(a,b){this.locations.append(a);return this.updateUnlessOption(b)},removeLocation:function removeLocation(a,b){for(var c=this.events.length-1;0<=c;--c){if(this.events[c].location==a){this.events.splice(c,1)}}for(var c=0;c<this.locations.length;++c){if(this.locations[c].id==a){this.locations.splice(c,1);break}}return this.updateUnlessOption(b)},getLocation:function getLocation(a){for(var b=0;b<this.locations.length;++b){if(this.locations[b].id==a){return this.locations[b]}}return null},getLocations:function getLocations(){var a=this.locations;if(this.sorting&&"name"===this.orderBy){a=a.sort(function(c,d){c=c.name.toLocaleLowerCase();d=d.name.toLocaleLowerCase();return c.localeCompare(d)})}else if(this.sorting&&"order"===this.orderBy){a=a.sort(function(c,a){return(c.order||0)-(a.order||0)})}return a},collide:function collide(a){for(var b=0;b<this.events.length;++b){if(a.location==this.events[b].location&&j(a,this.events[b])<this.minGapTimeBetween){return this.events[b]}}return null},addEvent:function addEvent(b,d){if(!this.locationExists(b.location)){throw new Error("Unknown location #"+b.location)}var e=b.start instanceof Date?b.start:new Date(b.start),f=b.end instanceof Date?b.end:new Date(b.end);if(!c(e,f)){throw new Error("Invalid time range: "+JSON.stringify([b.start,b.end]))}var g={id:++this.lastEventId,name:b.name,location:b.location+"",start:e,end:f,data:b.data?a.extend({},b.data):null,url:b.url||!1,className:b.className||null,disabled:b.disabled||!1,userData:a.extend({},b.userData||{})};if(d&&d.preserveId&&b.id){if(this.getEvent(b.id)){throw new Error("Cannot preserve id: already exists")}g.id=b.id}else{g.id=++this.lastEventId}if(!d||!d.allowCollisions){var h=this.collide(g);if(h){throw new o.CollisionError(h.id)}}this.events.push(g);this.updateUnlessOption(d);return g},addEvents:function addEvents(b,c){b.forEach(function(b){this.addEvent(b,a.extend({},{update:!1},c))},this);return this.updateUnlessOption(c)},setEvents:function setEvents(a,b){return this.removeAllEvents(b).addEvents(a,b)},removeEvent:function removeEvent(b,c){a.each(this.events,a.proxy(function(a,c){if(c.id==b){this.events.splice(a,1);return!1}},this));return this.updateUnlessOption(c)},removeAllEvents:function removeAllEvents(a){this.$el.find(".sked-tape__event, .sked-tape__gap").remove();this.events=[];return this.updateUnlessOption(a)},getEvents:function getEvents(){return this.events},getEvent:function getEvent(b){var c=null;a.each(this.events,a.proxy(function(a,d){if(d.id==b){c=d;return!1}},this));return c},isEditMode:function isEditMode(){return this.editMode},enterEditMode:function enterEditMode(){this.editMode=!0;return this},leaveEditMode:function leaveEditMode(){this.isAdding()&&this.cancelAdding();this.editMode=!1;return this},startAdding:function startAdding(a){this.dummyEvent=a;if(this.lastPicked){this.moveDummyEvent(this.lastPicked);this.updateDummyEvent()}return this.rerenderLocations()},cancelAdding:function cancelAdding(){if(this.dummyEvent){var b=this.dummyEvent.draggedEvent;if(b){this.addEvent(b,{preserveId:!0,update:!0});var c=a.Event("event:dragCanceled.skedtape",{detail:{event:b}});this.$el.trigger(c,b)}delete this.dummyEvent}if(this.$dummyEvent){this.$dummyEvent.remove();delete this.$dummyEvent;this.$el.trigger("event:addingCanceled.skedtape")}return this.rerenderLocations()},isAdding:function isAdding(){return!!this.dummyEvent},rerenderLocation:function rerenderLocation(b){var c=this.$locations.filter(function(){return a(this).data("id")==b}),d=this.getLocation(b);if(c.length&&d){c.replaceWith(this.renderLocation(d))}},rerenderLocations:function rerenderLocations(){this.$locations.empty().append(this.renderLocations());return this},renderLocation:function renderLocation(b){var c=a("<div class=\"sked-tape__location-text\"/>").text(b.name),d=a("<li class=\"sked-tape__location\"/>").attr({title:b.name,"data-id":b.id}).append(c),e=this.isAdding()?this.canAddIntoLocation(b,this.dummyEvent):void 0;this.postRenderLocation(c,b,e);return d},renderLocations:function renderLocations(){var b=a(document.createDocumentFragment());a.each(this.getLocations(),a.proxy(function(a,c){this.renderLocation(c).appendTo(b)},this));return b},postRenderLocation:function postRenderLocation(a,b,c){if(c!==void 0){a.parent().toggleClass("sked-tape__location--permitted",c).toggleClass("sked-tape__location--forbidden",!c)}},renderAside:function renderAside(){var b=a("<div class=\"sked-tape__aside\"/>");a("<div class=\"sked-tape__caption\"/>").text(this.caption).appendTo(b);this.$locations=a("<ul class=\"sked-tape__locations\"/>").append(this.renderLocations()).appendTo(b);this.$el.append(b)},renderTimeWrap:function renderTimeWrap(b){var c=this.renderHours(),d=a("<div class=\"sked-tape__time-wrap\"/>").appendTo(this.$el);this.$frame=a("<div class=\"sked-tape__time-frame\" tabindex=\"0\"/>").appendTo(d);this.$canvas=a("<div class=\"sked-tape__time-canvas\"/>").append(c).appendTo(this.$frame);b&&this.$frame.scrollLeft(b);var e=a("<div class=\"sked-tape__timeline-wrap\"/>").append(this.renderTimeRows()).append(this.renderGrid()),f=this.$canvas[0].scrollWidth;this.$canvas.css("min-width",Math.round(f*this.zoom)+"px").data("orig-min-width",f).append(e).append(c.clone());if(this.showDates){this.$canvas.prepend(this.renderDates())}},renderDates:function renderDates(){var b=a("<ul class=\"sked-tape__dates\"/>"),c=g(this.start),d=h(this.end),i=[];if(c>d){i.push({weight:1,text:this.format.date(this.start)})}else{i.push({weight:f(this.start)/q,text:this.format.date(this.start)});for(var j=new Date(c);j<d;){j.setTime(j.getTime()+1e3);i.push({weight:1,text:this.format.date(j)});j.setTime(j.getTime()+q-1e3)}i.push({weight:e(this.end)/q,text:this.format.date(this.end)})}var k=i.reduce(function(a,b){return a+b.weight},0),l=this.end.getTime()-this.start.getTime();i.forEach(function(c){var d=c.weight/k;a("<li/>").css("width",(100*d).toFixed(10)+"%").attr("title",c.text).addClass("sked-tape__date").toggleClass("sked-tape__date--short",d*l<=t).appendTo(b)});return b},renderHours:function renderHours(){var b=a("<ul/>"),c=new Date(this.start);while(c.getTime()<=this.end.getTime()){var d=c.getHours(),e=a("<time/>").attr("datetime",c.toISOString()).text(this.format.hours(24===d?0:d));a("<li/>").append(e).appendTo(b);c.setTime(c.getTime()+3600000)}var f=b.children();f.not(":last-child").width(100/(f.length-1)+"%");return a("<div class=\"sked-tape__hours\"/>").append(b)},renderGrid:function renderGrid(){var b=a("<ul class=\"sked-tape__grid\"/>"),c=new Date(this.start);while(c.getTime()<this.end.getTime()){a("<li/>").appendTo(b);c.setTime(c.getTime()+3600000)}var d=b.children();d.width(100/d.length+"%");return b},renderTimeRows:function renderTimeRows(){this.$timeline=a("<ul class=\"sked-tape__timeline\"/>");var b=this.events.sort(a.proxy(function(c,a){return c.start.getTime()-a.start.getTime()},this));this.timeIndicators={};a.each(this.getLocations(),a.proxy(function(c,d){var e=a("<li class=\"sked-tape__event-row\"/>").data("locationId",d.id).appendTo(this.$timeline),f=a("<div class=\"sked-tape__indicator\"/>").hide();if(this.timeIndicatorSerifs)f.addClass("sked-tape__indicator--serifs");this.timeIndicators[d.id]=f;e.append(f);var g=this.getIntersections(d.id),h=0,i;b.forEach(function(b){var c=b.location==d.id,f=b.end>this.start&&b.start<this.end;if(c&&f){var j=!1;a.each(g,a.proxy(function(c,d){a.each(d.events,function(a,c){if(c.id==b.id){j=!0;return!1}});if(j)return!1},this));var k=b.start.getTime()-h;if(k>=this.minTimeGapShown&&k<=this.maxTimeGapShown&&!j){e.append(this.renderGap(k,i,b.start))}i=b.end;h=i.getTime();var l=this.renderEvent(b).appendTo(e);if(!1!==this.maxTimeGapHi&&k<=this.maxTimeGapHi){e.children(".sked-tape__event").filter(":eq(-1), :eq(-2)").addClass("sked-tape__event--low-gap")}else if(j){l.addClass("sked-tape__event--low-gap")}}},this)},this));this.renderIntersections();return this.$timeline},renderIntersections:function renderIntersections(){this.$timeline.find(".sked-tape__intersection").remove();this.$timeline.find(".sked-tape__event-row").each(a.proxy(function(b,c){var d=a(c),e=d.data("locationId"),f=this.getIntersections(e);a.each(f,a.proxy(function(b,c){if(c.end>this.start&&c.start<this.end){a("<div class=\"sked-tape__intersection\"/>").css({width:this.computeEventWidth(c),left:this.computeEventOffset(c)}).data("events",c.events).appendTo(d)}},this))},this))},renderGap:function renderGap(b,c,d){var e={start:c,end:d},f=a("<span class=\"sked-tape__gap-text\"/>").text(Math.round(b/r));return a("<div class=\"sked-tape__gap\"/>").css({width:this.computeEventWidth(e),left:this.computeEventOffset(e)}).append(f)},updateDummyEvent:function updateDummyEvent(){if(!this.isAdding()){if(this.$dummyEvent){this.$dummyEvent.remove();delete this.$dummyEvent}return}var b=this.dummyEvent;if(!this.$dummyEvent){this.$dummyEvent=a("<div/>")}this.$dummyEvent[0].className="sked-tape__dummy-event "+(b.className||"");this.$dummyEvent.css({width:this.computeEventWidth(b),left:this.computeEventOffset(b)}).attr({"data-start":this.format.time(b.start),"data-end":this.format.time(b.end)});var c=this.$dummyEvent.closest(".sked-tape__event-row");if(!c.length||c.data("locationId")!=b.location){this.$el.find(".sked-tape__event-row").each(function(){if(a(this).data("locationId")==b.location){c=a(this);return!1}});this.$dummyEvent.remove().appendTo(c)}},renderEvent:function renderEvent(b){if(b.url&&!b.disabled){var c=a("<a/>").attr("href",b.url)}else{var c=a("<div/>")}c.addClass("sked-tape__event");if(b.className){c.addClass(b.className)}c.toggleClass("sked-tape__event--disabled",!!b.disabled).toggleClass("sked-tape__event--active",!!b.active).attr("title",b.name).css({width:this.computeEventWidth(b),left:this.computeEventOffset(b)});var d=a("<div class=\"sked-tape__center\"/>").text(b.name).appendTo(c);if(this.showEventTime||this.showEventDuration){var e=d.html(),f=this.format.roundDuration(b.end-b.start);if(this.showEventTime){e+="<br>"+this.format.time(b.start)+" - "+this.format.time(new Date(b.start.getTime()+f))}if(this.showEventDuration){e+="<br>"+this.format.duration(f)}d.html(e)}c.data(a.extend({},{eventId:b.id},b.data));var g=c.clone().css({width:"",left:"-10000px",top:"-10000px"}).appendTo(document.body);c.data("min-width",g.outerWidth());g.remove();return c},computeEventWidth:function computeEventWidth(a){var b=this.end<a.end?this.end:a.end,c=d(a.start,b);return 100*(c/d(this.start,this.end))+"%"},computeEventOffset:function computeEventOffset(a){var b=d(this.start,a.start);return 100*(b/d(this.start,this.end))+"%"},updateTimeIndicatorsPos:function updateTimeIndicatorsPos(){var a=this.start.getTime(),b=this.end.getTime(),c=new Date().getTime();Object.keys(this.timeIndicators).forEach(function(d){var e=this.getLocation(d),f=e.tzOffset===void 0?this.tzOffset:e.tzOffset,g=c-(f-n)*r,h=this.timeIndicators[d];if(g>=a&&g<=b){h.show().css("left",100*(g-a)/(b-a)+"%")}else{h.hide()}},this)},getIntersections:function getIntersections(b){var c=[],d=function(a){for(var b=0;b<c.length;++b){if(a.start.getTime()==c[b].start.getTime()&&a.end.getTime()==c[b].end.getTime()){return!0}}return!1};a.each(this.events,a.proxy(function(a,e){if(e.location!=b){return}for(var f=a+1,g;f<this.events.length;++f){g=this.events[f];if(g.location!=b){continue}var h=m(e,g);if(h&&!d(h)){h.events=[e,g];c.push(h)}}},this));return c},destroy:function destroy(){this.cleanup();this.$el.off().empty().removeClass("sked-tape sked-tape--has-dates")},cleanup:function cleanup(){if(a.fn.popover){this.$el.find(".sked-tape__event").popover(4<=p?"dispose":"destroy")}if(this.indicatorTimeout){clearInterval(this.indicatorTimeout);delete this.indicatorTimeout}},render:function render(b){var c=b&&b.preserveScroll&&this.$frame&&this.$frame.scrollLeft();this.cleanup();this.$el.empty().addClass("sked-tape");if(this.showDates){this.$el.addClass("sked-tape--has-dates")}this.renderAside();this.renderTimeWrap(c);this.updateTimeIndicatorsPos();this.indicatorTimeout=setInterval(a.proxy(function(){this.updateTimeIndicatorsPos()},this),1e3);setTimeout(a.proxy(function(){var b=4<=p?"body":"content";this.$el.find(".sked-tape__event").each(a.proxy(function(c,d){var e=a(d),f=e.width()<e.data("min-width"),g=parseFloat(e[0].style.left),h=g+parseFloat(e[0].style.width),i=.01;if(a.fn.popover&&(f||g<-i||h>100+i)){e.popover({trigger:"hover",content:e.find(".sked-tape__center").html(),html:!0,template:"<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"popover-"+b+"\"></div></div>",placement:50>g?"right":"left"})}},this))},this),0);return this},update:function update(){return this.render({preserveScroll:!0})},updateUnlessOption:function updateUnlessOption(a){return this.$timeline&&(!a||a.update)?this.update():this},setSnapToMins:function setSnapToMins(a){this.snapToMins=a},findEventsAtTime:function findEventsAtTime(b,c){var d=b.getTime(),e=[];a.each(this.getEvents(),function(a,b){if(b.location==c&&b.start.getTime()<=d&&b.end.getTime()>=d){e.push(b)}});return e},pick:function pick(b){var c=(b.pageX-this.$timeline.offset().left)/this.$timeline.width(),d=this.start.getTime()+c*(this.end.getTime()-this.start.getTime()),e;this.$el.find(".sked-tape__event-row").each(function(){var c=a(this).offset().top,d=c+a(this).height();if(b.pageY>=c&&b.pageY<=d){e=a(this).data("locationId");return!1}});return{locationId:e,date:new Date(Math.round(d))}},makeMouseEvent:function makeMouseEvent(b,c,d){return a.Event(b,a.extend({},d,{relatedTarget:c.currentTarget,clientX:c.clientX,clientY:c.clientY,offsetX:c.offsetX,offsetY:c.offsetY,pageX:c.pageX,pageY:c.pageY,screenX:c.screenX,screenY:c.screenY,detail:a.extend(this.pick(c),d.detail)}))},handleEventClick:function handleEventClick(b){var c=a(b.currentTarget).data("eventId"),d=this.getEvent(c);if(this.isEditMode()){if(this.isAdding())return;var e=this.makeMouseEvent("event:dragStart.skedtape",b,{detail:{component:this,event:d}});this.$el.trigger(e,[this]);if(!e.isDefaultPrevented()){var d=this.getEvent(c),e=this.makeMouseEvent("event:dragStarted.skedtape",b,{detail:{component:this,event:d}});this.$el.trigger(e,[this]);this.removeEvent(c);this.startAdding({id:d.id,name:d.name,duration:d.end.getTime()-d.start.getTime(),userData:a.extend({},d.userData||{}),draggedEvent:d})}}else{var e=this.makeMouseEvent("event:click.skedtape",b,{detail:{component:this,event:d}});this.$el.trigger(e,[this])}},handleEventContextMenu:function handleEventContextMenu(b){b.preventDefault();if(this.rmbCancelsAdding&&this.isAdding()){return this.cancelAdding()}var c=a(b.currentTarget).data("eventId"),d=this.getEvent(c),e=this.makeMouseEvent("event:contextmenu.skedtape",b,{detail:{component:this,event:d}});this.$el.trigger(e,[this])},handleIntersectionClick:function handleIntersectionClick(a){var b=this.makeMouseEvent("intersection:click.skedtape",a,{detail:{component:this}}),c=b.detail;c.events=this.findEventsAtTime(c.date,c.locationId);this.$el.trigger(b,[this])},handleIntersectionContextMenu:function handleIntersectionContextMenu(a){a.preventDefault();if(this.rmbCancelsAdding&&this.isAdding()){return this.cancelAdding()}var b=this.makeMouseEvent("intersection:contextmenu.skedtape",a,{detail:{component:this}}),c=b.detail;c.events=this.findEventsAtTime(c.date,c.locationId);this.$el.trigger(b,[this])},completeAdding:function completeAdding(a){var b=this.dummyEvent;if(this.collide(b)){var c=this.makeMouseEvent("event:dragEndRefused.skedtape",a,{detail:{component:this,event:b}});this.$el.trigger(c,[this]);return}var c=this.makeMouseEvent("event:dragEnd.skedtape",a,{detail:{component:this,event:b}});this.$el.trigger(c,[this]);if(!c.isDefaultPrevented()){try{var d=this.addEvent(b,{preserveId:!0,update:!0});delete b.duration;delete this.dummyEvent;this.$dummyEvent.remove();delete this.$dummyEvent;var c=this.makeMouseEvent("event:dragEnded.skedtape",a,{detail:{component:this,event:d}});this.$el.trigger(c,[this]);this.rerenderLocations()}catch(a){if("SkedTape.CollisionError"!==a.name){throw a}var c=this.makeMouseEvent("event:dragEndRefused.skedtape",a,{detail:{component:this,event:b}});this.$el.trigger(c,[this])}}},handleTimelineClick:function handleTimelineClick(a){if(b(a))return;if(this.isAdding()){return this.completeAdding(a)}var c=this.makeMouseEvent("timeline:click.skedtape",a,{detail:{component:this}});this.$el.trigger(c,[this])},handleTimelineContextMenu:function handleTimelineContextMenu(a){if(b(a))return;a.preventDefault();if(this.rmbCancelsAdding&&this.isAdding()){return this.cancelAdding()}var c=this.makeMouseEvent("timeline:contextmenu.skedtape",a,{detail:{component:this}});this.$el.trigger(c,[this])},moveDummyEvent:function moveDummyEvent(b){var c=this.dummyEvent,d=b.date;if(this.snapToMins){var e=k(d),f=(d.getTime()-e.getTime())/r,g=Math.floor(f/this.snapToMins)*this.snapToMins,h=f-g<this.snapToMins/2?g:g+this.snapToMins;d=new Date(e.getTime()+Math.round(h*r))}a.extend(c,{start:d,end:new Date(d.getTime()+c.duration)});if(b.locationId){var i=this.getLocation(b.locationId);if(this.canAddIntoLocation(i,c)){this.beforeAddIntoLocation(i,c);c.location=b.locationId}}},handleMouseMove:function handleMouseMove(a){this.lastPicked=this.pick(a);if(!this.isAdding())return;this.moveDummyEvent(this.lastPicked);this.updateDummyEvent()},handleKeyDown:function handleKeyDown(a){if("+"===a.key){this.zoomIn()}else if("-"===a.key){this.zoomOut()}},handleWheel:function handleWheel(a){if(a.ctrlKey){if(0>a.originalEvent.deltaY){this.zoomIn()}else{this.zoomOut()}return!1}else if(!a.shiftKey&&this.scrollWithYWheel){var b=0<a.originalEvent.deltaY?1:-1;b*=.9*this.$frame.width();if(this.$frame.queue().length){var c=this.$frame.scrollLeft();b+=this.$frame.finish().scrollLeft()-c;this.$frame.scrollLeft(c)}this.$frame.animate({scrollLeft:"+="+b},200);return!1}}};o.CollisionError=function(a){this.message="Collision with entry #"+a;this.eventId=a;if("captureStackTrace"in Error)Error.captureStackTrace(this,o.CollisionError);else this.stack=new Error().stack};o.CollisionError.prototype=Object.create(Error.prototype);o.CollisionError.prototype.name="SkedTape.CollisionError";o.CollisionError.prototype.constructor=o.CollisionError;var p=a.fn.popover?parseInt(a.fn.popover.Constructor.VERSION.charAt(0),10):0,q=1e3*86400,r=60000,s=60*r,t=2*s-1;function b(b){return!!a(b.target).closest(".sked-tape__event, .sked-tape__intersection").length}function c(a,b){var c=a instanceof Date&&b instanceof Date;return c&&a<=b}function d(a,b){return(b.getTime()-a.getTime())/1e3/60/60}function e(a){var b=60*(60*a.getHours())+60*a.getMinutes()+a.getSeconds();return 1e3*b+a.getMilliseconds()}function f(a){return q-e(a)}function g(a){a=new Date(a);a.setTime(a.getTime()+f(a));return a}function h(a){a=new Date(a);a.setTime(a.getTime()-e(a));return a}function j(c,a){var b=c.start<a.start?c:a,d=b===c?a:c;return d.start-b.end}function k(a){var b=new Date(a);b.setHours(a.getHours(),0,0,0);return b}function l(a){var b=k(a);if(b<a){b.setTime(b.getTime()+s)}return b}a.fn.skedTape=function(b){var c=b&&("string"==typeof b||b instanceof String)?b:"";b=b&&!c&&"object"===_typeof(b)?a.extend({},b):{};var d=c?Array.prototype.slice.call(arguments,1):[];return this.each(function(){var e=a(this).data(a.fn.skedTape.dataKey);if(!e||!c){if(c){throw new Error("SkedTape plugin hadn't been initialized but used")}if(e){e.destroy()}var f=a.extend({},a.fn.skedTape.defaults,b,{el:this});delete f.locations;delete f.events;delete f.start;delete f.end;delete f.deferRender;e=new o(f);b.start&&b.end&&e.setTimespan(b.start,b.end,{update:!1});b.locations&&e.setLocations(b.locations,{update:!1});b.events&&e.setEvents(b.events,{update:!1,allowCollisions:!0});a(this).data(a.fn.skedTape.dataKey,e);b.deferRender||e.render()}else{switch(c){case"destroy":e.destroy();a(this).removeData(a.fn.skedTape.dataKey);break;default:if(0<=["addEvent","addEvents","removeEvent","setEvents","removeAllEvents","enterEditMode","leaveEditMode","startAdding","cancelAdding","setLocations","addLocation","addLocations","removeLocation","setTimespan","setDate","zoomIn","zoomOut","setZoom","resetZoom","render","setSnapToMins"].indexOf(c)){e[c].apply(e,d)}else{throw new Error("SkedTape plugin cannot recognize command")}}}})};function m(c,a){var b=c.start<a.start?c:a,d=b==c?a:c;if(b.end<d.start){return null}return{start:d.start,end:b.end<d.end?b.end:d.end}}a.fn.skedTape.dataKey="sked-tape";a.fn.skedTape.format=o.defaultFormatters;a.fn.skedTape.defaults={caption:"",maxZoom:10,zoomStep:.5,zoom:1,showEventTime:!1,showEventDuration:!1,showDates:!0,minGapTimeBetween:0,minTimeGapShown:1*r,maxTimeGapShown:60*r-1,maxTimeGapHi:!1,scrollWithYWheel:!1,sorting:!1,orderBy:"order",snapToMins:1,rmbCancelsAdding:!0,tzOffset:n,timeIndicatorSerifs:!1,canAddIntoLocation:function canAddIntoLocation(){return!0},beforeAddIntoLocation:function beforeAddIntoLocation(){},postRenderLocation:function postRenderLocation(a,b,c){o.prototype.postRenderLocation.call(this,a,b,c)}};a.skedTape=function(b){return a("<div/>").skedTape(a.extend({},b||{},{deferRender:!0}))}});
//# sourceMappingURL=jquery.skedTape.min.js.map
