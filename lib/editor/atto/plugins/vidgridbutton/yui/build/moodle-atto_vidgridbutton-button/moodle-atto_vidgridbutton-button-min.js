YUI.add("moodle-atto_vidgridbutton-button",function(i,t){var n="https://app.vidgrid.com/lti/embedSsoAutoLogin",r="moodleLtiIframe",d="atto_vidgridbutton",s="float:left; display:none",a='<iframe src="{{src}}" id="{{id}}" height="{{height}}" width="{{width}}" scrolling="auto"></iframe>';i.namespace("M.atto_vidgridbutton").Button=i.Base.create("button",i.M.editor_atto.EditorPlugin,[],{initializer:function(){var t;this.get("disabled")||(t="iconone",this.addButton({icon:"ed/"+t,iconComponent:"atto_vidgridbutton",buttonName:t,callback:this._displayDialogue,callbackArgs:t}))},_displayDialogue:function(t,e){var o=this.getDialogue({headerContent:M.util.get_string("dialogtitle",d),width:"900px",height:"700px",focusAfterHide:e});t.preventDefault(),o.after("visibleChange",function(){!1===o.getAttrs().visible&&setTimeout(function(){o.reset()},5)}),"900px"!==o.width&&o.set("width","900px"),"700px"!==o.height&&o.set("height","700px"),o.set("bodyContent",this._getFormContent(e)),o.show(),this._doInsert(this)},_getFormContent:function(t){var e=this.get("sessKey"),o=this.get("webRoot")+"/mod/lti/return.php?course="+this.get("courseId")+"&sesskey="+e,e=this.get("orgApiKey"),e=n+"?oauth_consumer_key="+e+"&launch_presentation_return_url="+encodeURIComponent(o)+"&tool_consumer_info_product_family_code=moodle",o=i.Handlebars.compile(a),e=i.Node.create(o({elementid:this.get("host").get("elementid"),component:d,clickedicon:t,src:e,height:650,width:850,id:r,selectalign:s}));return this._form=e},_doInsert:function(o){var i=document.getElementById(r);i.onload=function(){var t,e=i.contentDocument;e&&(e=(t=e.getElementById("page-content").querySelector('[role="main"]').innerText).search("https://"),(t=t.substr(e)).indexOf("vidgrid")<=0||(t='<iframe allowfullscreen="" frameborder="0" height="315" src="'+t+'" width="560"></iframe>',o.getDialogue({focusAfterHide:null}).hide(),o.editor.focus(),o.get("host").insertContentAtFocusPoint(t),o.markUpdated()))}}},{ATTRS:{disabled:{value:!1},courseId:{value:null},orgApiKey:{value:null},webRoot:{value:null},sessKey:{value:null}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});