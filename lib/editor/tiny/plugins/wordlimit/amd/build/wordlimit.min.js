define("tiny_wordlimit/wordlimit",["exports","tiny_wordlimit/ui","./options"],(function(_exports,_ui,_options){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setupWordLimit=void 0;_exports.setupWordLimit=editor=>{const wordLimit=(0,_options.getWordLimit)(editor);wordLimit&&registerWordLimitEvents(editor,wordLimit)};const registerWordLimitEvents=(editor,wordLimit)=>{const updateWordCountAlertWithDelay=throttleWithCancel((()=>(0,_ui.updateWordCountAlert)(editor,wordLimit)),500),tinymceUtilDelay=window.tinymce.util.Tools.resolve("tinymce.util.Delay");editor.on("init",(()=>{(0,_ui.addWordLimitElement)(editor,wordLimit),tinymceUtilDelay.setEditorTimeout(editor,(()=>{editor.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",updateWordCountAlertWithDelay.throttle)}),0),editor.on("remove",updateWordCountAlertWithDelay.cancel),(0,_ui.updateWordCountAlert)(editor,wordLimit)}))},throttleWithCancel=(callback,rate)=>{let timer=null;return{cancel:()=>{timer&&(clearTimeout(timer),timer=null)},throttle:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];timer||(timer=setTimeout((()=>{timer=null,callback(...args)}),rate))}}}}));

//# sourceMappingURL=wordlimit.min.js.map