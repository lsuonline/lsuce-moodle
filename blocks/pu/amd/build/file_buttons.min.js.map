{"version":3,"file":"file_buttons.min.js","names":["define","$","noti","PULib","Refresh","confirmCheckExecute","params","callYesNoModi","then","response","status","check_file_exists","success","scrollTop","callNoti","message","msg","type","get_file_list","refreshGeneralFiles"],"sources":["../src/file_buttons.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Cross Enrollment Tool\n *\n * @package   block_pu\n * @copyright 2021 onwards Louisiana State University\n * @copyright 2021 onwards David Lowe, Robert Russo\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'block_pu/notifications', 'block_pu/pu_lib', 'block_pu/refresh'],\n    function($, noti, PULib, Refresh) {\n    'use strict';\n    return {\n\n        confirmCheckExecute: function (params) {\n            // First let's confirm.\n            noti.callYesNoModi(params).then(function (response) {\n                // console.log(\"yesNo Modal, what is response: \", response);\n                if (response.status == true) {\n                    return response;\n                }\n\n            }).then(function (response) {\n\n                // We need to check if the file exists.\n                PULib.check_file_exists(response).then(function (response) {\n                    if (response.success == false) {\n                        $('html,body').scrollTop(0);\n                        noti.callNoti({\n                            message: response.msg,\n                            type: \"fail\"\n                        });\n\n                    } else {\n                        // Get the current list of files from the folder that's indicated\n                        // in the settings page.\n                        PULib.get_file_list(response).then(function (response) {\n                            Refresh.refreshGeneralFiles(response);\n                        });\n                    }\n                });\n            });\n        },\n    };\n});"],"mappings":"AAwBCA,OAAM,yBAAC,CAAC,QAAQ,CAAE,wBAAwB,CAAE,iBAAiB,CAAE,kBAAkB,CAAC,CAC/E,SAASC,CAAC,CAAEC,CAAI,CAAEC,CAAK,CAAEC,CAAO,CAAE,CAClC,YAAY,CACZ,MAAO,CAEHC,mBAAmB,CAAE,SAAAA,oBAAUC,CAAM,CAAE,CAEnCJ,CAAI,CAACK,aAAa,CAACD,CAAM,CAAC,CAACE,IAAI,CAAC,SAAUC,CAAQ,CAAE,CAEhD,GAAI,IAAAA,CAAQ,CAACC,MAAc,CAAE,CACzB,MAAO,CAAAD,CACX,CAEJ,CAAC,CAAC,CAACD,IAAI,CAAC,SAAUC,CAAQ,CAAE,CAGxBN,CAAK,CAACQ,iBAAiB,CAACF,CAAQ,CAAC,CAACD,IAAI,CAAC,SAAUC,CAAQ,CAAE,CACvD,GAAI,IAAAA,CAAQ,CAACG,OAAgB,CAAE,CAC3BX,CAAC,CAAC,WAAW,CAAC,CAACY,SAAS,CAAC,CAAC,CAAC,CAC3BX,CAAI,CAACY,QAAQ,CAAC,CACVC,OAAO,CAAEN,CAAQ,CAACO,GAAG,CACrBC,IAAI,CAAE,MACV,CAAC,CAEL,CAAC,IAAM,CAGHd,CAAK,CAACe,aAAa,CAACT,CAAQ,CAAC,CAACD,IAAI,CAAC,SAAUC,CAAQ,CAAE,CACnDL,CAAO,CAACe,mBAAmB,CAACV,CAAQ,CACxC,CAAC,CACL,CACJ,CAAC,CACL,CAAC,CACL,CACJ,CACJ,CAAC,CAAC"}