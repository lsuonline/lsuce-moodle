{"version":3,"file":"events.min.js","names":["define","$","noti","PULib","FB","registerEvents","on","ev","preventDefault","row_data","record","closest","data","this_form","title","body","save_button","mfileid","find","val","confirmCheckExecute","callYesNoModi","then","response","status","console","log","append","submit","init"],"sources":["../src/events.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Cross Enrollment Tool\n *\n * @package   block_pu\n * @copyright 2008 onwards Louisiana State University\n * @copyright 2008 onwards David Lowe, Robert Russo\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'block_pu/notifications', 'block_pu/pu_lib', 'block_pu/file_buttons'],\n    function($, noti, PULib, FB) {\n    'use strict';\n    return {\n        /**\n         * Register click events for the page.\n         *\n         * @param null\n         * @return void\n         */\n        registerEvents: function () {\n            // --------------------------------\n            // Copy File.\n            // --------------------------------\n            $('.block_pu_container .pu_file_copy').on('click', function(ev) {\n                ev.preventDefault();\n\n                var row_data = {\n                    \"record\": $(this).closest(\"tr\").data(\"rowid\"),\n                    \"this_form\": $(this).closest(\"form\"),\n                    \"title\": 'Copy File',\n                    \"body\": 'Copy and move file to location in settings?',\n                    \"save_button\": \"Copy\",\n                    \"mfileid\": $(this).closest(\"tr\").find('input[name=mdl_file_id]').val()\n                };\n\n                FB.confirmCheckExecute(row_data);\n            });\n\n            // --------------------------------\n            // Delete Non Moodle File.\n            // --------------------------------\n            $('.block_pu_container .nonmood_file_delete').on('click', function(ev) {\n                ev.preventDefault();\n\n                // var links = $(this).closest(\"tr\").data(\"mlinks\"),\n                var row_data = {\n                    \"record\": $(this).closest(\"tr\").data(\"rowid\"),\n                    // \"this_form\": $(this).closest(\"form\"),\n                    \"title\": 'Delete File',\n                    \"body\": 'Are you sure you want to delete this file?',\n                    \"save_button\": \"Hell Ya\"\n                };\n                noti.callYesNoModi(row_data).then(function (response) {\n                    if (response.status == true) {\n                        var this_form = $('#nonmood_file_form_' + response.data.record);\n                        console.log(\"What is response when deleting: \", response);\n                        console.log(\"What is data when deleting: \", response.data);\n                        console.log(\"What is the record: \" + response.data.record);\n                        console.log(\"What is this_form: \", this_form);\n                        // Convert all the form elements values to a serialised string.\n                        this_form.append('<input type=\"hidden\" name=\"action\" value=\"delete\" />');\n                        this_form.submit();\n                    }\n                });\n            });\n            // --------------------------------\n            // Delete Moodle File.\n            // --------------------------------\n            $('.block_pu_container .pu_file_delete').on('click', function(ev) {\n                ev.preventDefault();\n\n                // var links = $(this).closest(\"tr\").data(\"mlinks\"),\n                var row_data = {\n                    \"record\": $(this).closest(\"tr\").data(\"rowid\"),\n                    // \"this_form\": $(this).closest(\"form\"),\n                    \"title\": 'Delete File',\n                    \"body\": 'Are you sure you want to delete this file?',\n                    \"save_button\": \"Hell Ya\"\n                };\n\n                noti.callYesNoModi(row_data).then(function (response) {\n                    if (response.status == true) {\n                        var this_form = $('#pu_file_form_' + response.data.record);\n                        console.log(\"What is response when deleting: \", response);\n                        console.log(\"What is data when deleting: \", response.data);\n                        // Convert all the form elements values to a serialised string.\n                        this_form.append('<input type=\"hidden\" name=\"action\" value=\"delete\" />');\n                        this_form.submit();\n                    }\n                });\n            });\n        },\n\n        /**\n         * Currently this is being called from the mustache templates when viewing lists.\n         * @param null\n         * @return void\n         */\n        init: function() {\n            var that = this;\n            // Register events.\n            that.registerEvents();\n        },\n    };\n});"],"mappings":"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"}