/**
 * Reprocess All Tool
 * @copyright  Louisiana State University
 * @copyright  The guy who did stuff: David Lowe
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_ues_reprocess/repall",["jquery","core/ajax"],(function($,Ajax){var t={lastYear:null,lastSemester:null,lastDepartment:null,lastCourse:null,init:function(){$("select#id_ues_year").on("change",(function(){$("select#id_ues_courses").empty(),t.lastYear=$("select#id_ues_year").val(),t.formChange({name:t.lastYear,id:"select#id_ues_year",meth:"ues_reprocess_get_courses",args:{year:$("select#id_ues_year option:selected").text(),semester:$("select#id_ues_semesters").val(),department:$("select#id_ues_departments").val(),update:"select#id_ues_courses"}})})),$("select#id_ues_semesters").on("change",(function(){$("select#id_ues_courses").empty(),t.lastSemester=$("select#id_ues_semesters").val(),t.formChange({name:t.lastSemester,id:"select#id_ues_semesters",meth:"ues_reprocess_get_courses",args:{year:$("select#id_ues_year option:selected").text(),semester:$("select#id_ues_semesters").val(),department:$("select#id_ues_departments").val(),update:"select#id_ues_courses"}})})),$("select#id_ues_departments").on("change",(function(){t.lastDepartment=$("select#id_ues_departments").val(),$("select#id_ues_courses").empty(),t.formChange({name:t.lastDepartment,id:"select#id_ues_departments",meth:"ues_reprocess_get_courses",args:{year:$("select#id_ues_year option:selected").text(),semester:$("select#id_ues_semesters").val(),department:$("select#id_ues_departments").val(),update:"select#id_ues_courses"}})})),$("select#id_ues_courses").on("change",(function(){t.lastCourse=$("select#id_ues_courses").val(),$("input[name='ues_courses_h']").val($("select#id_ues_courses").val())})),t.year=null,t.lastSemester=null,t.lastDepartment=null,t.lastCourse=null},formChange:function(obj){console.log("Data to send: ",obj),null===obj.args.course&&(obj.args.course=""),""===t[obj.name]?t.updateChoices([]):Ajax.call([{methodname:obj.meth,args:obj.args}])[0].done(t.updateChoices).fail((function(jqXHR,textStatus,errorThrown){console.log(jqXHR),console.log(textStatus),console.log(errorThrown)}))},updateChoices:function(response){if(console.log("What is the returing obj: ",response),$("span#repall_estimator_course").text(response.csize),$("span#repall_estimator_time").text(new Date(4*response.csize*1e3).toISOString().slice(11,19)),"none"!=response.update){var select=$(response.update);select.empty(),$(response.data).each((function(index,option){select.append('<option value="'+option.value+'">'+option.label+"</option>")}))}}};return t}));

//# sourceMappingURL=repall.min.js.map