/**
 * Cross Enrollment Tool
 *
 * @copyright 2008 onwards Louisiana State University
 * @copyright 2008 onwards David Lowe, Robert Russo
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_lsuxe/destcourse_source",["jquery","core/ajax","block_lsuxe/notifications","block_lsuxe/xe_lib"],(function($,Ajax,Noti,XELib){return{getGroups:function(c,v){var params={type:"GET",url:sessionStorage.getItem("currentUrl")+"/webservice/rest/server.php",data:{wstoken:sessionStorage.getItem("currentToken"),wsfunction:"core_group_get_course_user_groups",courseid:v,moodlewsrestformat:"json"}};return XELib.jaxyRemotePromise(params)},processSelected:function(params){var course_shortname="",course_value="";params.selector.length>1||1==params.selector.length&&(course_shortname=params.selector[0].label,course_value=params.selector[0].value.split("__")[0],this.getGroups(course_shortname,course_value))},onSelected:function(selector,data){this.processSelected({selector:selector,data:data})},getCourses:function(params){params={type:"GET",url:sessionStorage.getItem("currentUrl")+"/webservice/rest/server.php",data:{wstoken:sessionStorage.getItem("currentToken"),wsfunction:"core_course_search_courses",criterianame:"search",criteriavalue:$(".xe_dest_sn_wrap input").val(),moodlewsrestformat:"json"}};return XELib.jaxyRemotePromise(params)},processResults:function(selector,results){if("success"in results&&0==results.success){if("Could not connect to the server."==results.msg)return void Noti.callNoti({message:results.msg,type:"error"})}else if(results.courses.length>0){var options=[];return $.each(results.courses,(function(index,data){options.push({value:data.id+"__"+data.shortname,label:data.shortname})})),options}Noti.callNoti({message:"Sorry, can't seem to reach anything at the moment, please contact the Moodle Dev team.",type:"error"})},transport:function(selector,query,callback){this.getCourses().then(callback).catch()}}}));

//# sourceMappingURL=destcourse_source.min.js.map