{"version":3,"sources":["../src/crud_buttons.js"],"names":["define","$","noti","XELib","registerEvents","on","console","log","ev","preventDefault","record","closest","data","url","localStorage","pushPost","row_data","callRemoveModi","then","response","status","this_form","append","submit","init","that"],"mappings":"AAsBCA,OAAM,4BAAC,CAAC,QAAD,CAAW,2BAAX,CAAwC,oBAAxC,CAAD,CAAgE,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAyB,CAC5F,aAEA,MAAO,CAEHC,cAAc,CAAE,yBAAY,CAExBH,CAAC,CAAC,sCAAD,CAAD,CAA0CI,EAA1C,CAA6C,OAA7C,CAAsD,UAAW,CAC7DC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAGH,CAJD,EAMAN,CAAC,CAAC,oCAAD,CAAD,CAAwCI,EAAxC,CAA2C,OAA3C,CAAoD,SAASG,CAAT,CAAa,CAC7DA,CAAE,CAACC,cAAH,GACAH,OAAO,CAACC,GAAR,CAAY,YAAZ,EACA,GAAIG,CAAAA,CAAM,CAAGT,CAAC,CAAC,IAAD,CAAD,CAAQU,OAAR,CAAgB,IAAhB,EAAsBC,IAAtB,CAA2B,OAA3B,CAAb,CAMIC,CAAG,CAAGC,YAAY,QAAZ,CAA0B,gBAA1B,CAA6CA,YAAY,QAAzD,CAAuE,MANjF,CAOAX,CAAK,CAACY,QAAN,CAAeF,CAAf,CANgB,CACR,WAAc,QADN,CAER,SAAYH,CAFJ,CAGR,MAAS,GAHD,CAMhB,CAEH,CAZD,EAcAT,CAAC,CAAC,sCAAD,CAAD,CAA0CI,EAA1C,CAA6C,OAA7C,CAAsD,SAASG,CAAT,CAAa,CAC/DA,CAAE,CAACC,cAAH,GAEA,GAAIO,CAAAA,CAAQ,CAAG,CACX,OAAUf,CAAC,CAAC,IAAD,CAAD,CAAQU,OAAR,CAAgB,IAAhB,EAAsBC,IAAtB,CAA2B,OAA3B,CADC,CAEX,UAAaX,CAAC,CAAC,IAAD,CAAD,CAAQU,OAAR,CAAgB,MAAhB,CAFF,CAAf,CAKAT,CAAI,CAACe,cAAL,CAAoBD,CAApB,EAA8BE,IAA9B,CAAmC,SAAUC,CAAV,CAAoB,CACnD,GAAI,IAAAA,CAAQ,CAACC,MAAb,CAA6B,CACzBd,OAAO,CAACC,GAAR,CAAY,wBAAZ,EACA,GAAIc,CAAAA,CAAS,CAAGpB,CAAC,CAAC,aAAakB,CAAQ,CAACP,IAAT,CAAcF,MAA5B,CAAjB,CAIAW,CAAS,CAACC,MAAV,CAAiB,gEAAjB,EACAD,CAAS,CAACE,MAAV,GAEAjB,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAA2CY,CAAQ,CAACP,IAAT,CAAcF,MAAzD,CAIH,CAbD,IAaO,CACHJ,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAEH,CACJ,CAlBD,CAmBH,CA3BD,CA4BH,CApDE,CA0DHiB,IAAI,CAAE,eAAW,CACb,GAAIC,CAAAA,CAAI,CAAG,IAAX,CAGAA,CAAI,CAACrB,cAAL,EACH,CA/DE,CAkEV,CArEM,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    block_lsuxe Cross Enrollment\n * @copyright  2008 onwards Louisiana State University\n * @copyright  2008 onwards David Lowe\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'block_lsuxe/notifications', 'block_lsuxe/xe_lib'], function($, noti, XELib) {\n    'use strict';\n\n    return {\n\n        registerEvents: function () {\n\n            $('.block_lsuxe_container .mview_update').on('click', function() {\n                console.log(\"MVIEW_UPDATE\");\n                // var record = $(this).closest(\"tr\").data(\"rowid\");\n                // TODO: finish this.\n            });\n\n            $('.block_lsuxe_container .mview_edit').on('click', function(ev) {\n                ev.preventDefault();\n                console.log(\"MVIEW_EDIT\");\n                var record = $(this).closest(\"tr\").data(\"rowid\"),\n                    send_this = {\n                        \"sentaction\": \"update\",\n                        \"sentdata\": record,\n                        \"vform\": \"1\"\n                    },\n                    url = localStorage[\"wwwroot\"] + \"/blocks/lsuxe/\" + localStorage[\"xe_form\"] + \".php\";\n                XELib.pushPost(url, send_this);\n                // TODO: finish this.\n            });\n\n            $('.block_lsuxe_container .mview_delete').on('click', function(ev) {\n                ev.preventDefault();\n\n                var row_data = {\n                    \"record\": $(this).closest(\"tr\").data(\"rowid\"),\n                    \"this_form\": $(this).closest(\"form\")\n                };\n\n                noti.callRemoveModi(row_data).then(function (response) {\n                    if (response.status == true) {\n                        console.log(\"YAY the thingy is true\");\n                        var this_form = $('#map_form_'+response.data.record);\n                        // Convert all the form elements values to a serialised string.\n                        // var formData = $(ev).closest(\"form\").serialize();\n                        // var formData = row_data.this_form.serialize();\n                        this_form.append('<input type=\"hidden\" name=\"sentaction\" value=\"delete\" />');\n                        this_form.submit();\n\n                        console.log(\"does row_data exist BITCH: \", response.data.record);\n                        // console.log(\"What is the formData BITCH: \", formData);\n                        // console.log(\"What is the response formData BITCH: \", response.data);\n\n                    } else {\n                        console.log(\"NOPE the thingy is false\");\n\n                    }\n                });\n            });\n        },\n        /**\n         * Some description here.......\n         * @param {obj} A simple object with the 'message' and 'type' of notification.\n         * @return void\n         */\n        init: function() {\n            var that = this;\n\n            // register events\n            that.registerEvents();\n        },\n\n    };\n});"],"file":"crud_buttons.min.js"}