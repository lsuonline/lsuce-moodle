{"version":3,"file":"lsu.min.js","sources":["../src/lsu.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * LSU Custom Snap Changes\n *\n * @package\n * @copyright 2008 onwards Louisiana State University\n * @copyright 2008 onwards David Lowe, Robert Russo\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/templates', 'core/notification'],\n    function($, coretemp, noty) {\n    'use strict';\n    return {\n        /**\n         * This is the starting function for the Cross Enrollment Tool\n         * @param {int} id extras is data coming from PHP\n         */\n        updateCard: function(id) {\n            // Clear the session storage so it won't last outside of the form page.\n            $.ajax({\n                type: \"GET\",\n                async: true,\n                url: M.cfg.wwwroot + '/theme/snap/rest.php?action=get_course_card_quick_links',\n                data: 'courseid='+id,\n                success: function(data) {\n                    // This will call the function to load and render our template.\n                    coretemp.renderForPromise('theme_snap/course_card_links', data)\n\n                    // It returns a promise that needs to be resoved.\n                    .then(({html, js}) => {\n                        // replace the templated html\n                        var thislink = 'span.course_quick_link_swap_' + data.courseid;\n                        coretemp.replaceNodeContents(thislink, html, js);\n                    })\n\n                    // Deal with this exception (Using core/notify exception function is recommended).\n                    .catch(ex => noty.exception(ex));\n                }\n            });\n        },\n\n        updateList: function() {\n            // Clear the session storage so it won't last outside of the form page.\n            var elts = $('*[class*=\"course_quick_link_swap_list_\"]');\n            elts.each(function() {\n\n                $.ajax({\n                    type: \"GET\",\n                    async: true,\n                    url: M.cfg.wwwroot + '/theme/snap/rest.php?action=get_course_card_quick_links',\n                    data: 'courseid=' + $(this).data('courseid'),\n                    success: function(data) {\n                        // This will call the function to load and render our template.\n                        coretemp.renderForPromise('theme_snap/course_card_links', data)\n\n                        // It returns a promise that needs to be resoved.\n                        .then(({html, js}) => {\n                            // replace the templated html\n                            var thislink = 'span.course_quick_link_swap_list_' + data.courseid;\n                            coretemp.replaceNodeContents(thislink, html, js);\n                        })\n\n                        // Deal with this exception (Using core/notify exception function is recommended).\n                        .catch(ex => noty.exception(ex));\n                    }\n                });\n\n            });\n        }\n    };\n});"],"names":["define","$","coretemp","noty","updateCard","id","ajax","type","async","url","M","cfg","wwwroot","data","success","renderForPromise","then","_ref","html","js","thislink","courseid","replaceNodeContents","catch","ex","exception","updateList","each","this","_ref2"],"mappings":";;;;;;;;AAwBAA,wBAAO,CAAC,SAAU,iBAAkB,sBAChC,SAASC,EAAGC,SAAUC,YAEf,CAKHC,WAAY,SAASC,IAEjBJ,EAAEK,KAAK,CACHC,KAAM,MACNC,OAAO,EACPC,IAAKC,EAAEC,IAAIC,QAAU,0DACrBC,KAAM,YAAYR,GAClBS,QAAS,SAASD,MAEdX,SAASa,iBAAiB,+BAAgCF,MAGzDG,MAAKC,WAACC,KAACA,KAADC,GAAOA,aAENC,SAAW,+BAAiCP,KAAKQ,SACrDnB,SAASoB,oBAAoBF,SAAUF,KAAMC,OAIhDI,OAAMC,IAAMrB,KAAKsB,UAAUD,UAKxCE,WAAY,WAEGzB,EAAE,4CACR0B,MAAK,WAEN1B,EAAEK,KAAK,CACHC,KAAM,MACNC,OAAO,EACPC,IAAKC,EAAEC,IAAIC,QAAU,0DACrBC,KAAM,YAAcZ,EAAE2B,MAAMf,KAAK,YACjCC,QAAS,SAASD,MAEdX,SAASa,iBAAiB,+BAAgCF,MAGzDG,MAAKa,YAACX,KAACA,KAADC,GAAOA,cAENC,SAAW,oCAAsCP,KAAKQ,SAC1DnB,SAASoB,oBAAoBF,SAAUF,KAAMC,OAIhDI,OAAMC,IAAMrB,KAAKsB,UAAUD"}